(()=>{var mr=Object.create;var dt=Object.defineProperty;var gr=Object.getOwnPropertyDescriptor;var _r=Object.getOwnPropertyNames;var vr=Object.getPrototypeOf,br=Object.prototype.hasOwnProperty;var Te=(e=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(e,{get:(s,o)=>(typeof require!="undefined"?require:s)[o]}):e)(function(e){if(typeof require!="undefined")return require.apply(this,arguments);throw new Error('Dynamic require of "'+e+'" is not supported')});var _e=(e,s)=>()=>(s||e((s={exports:{}}).exports,s),s.exports);var yr=(e,s,o,r)=>{if(s&&typeof s=="object"||typeof s=="function")for(let i of _r(s))!br.call(e,i)&&i!==o&&dt(e,i,{get:()=>s[i],enumerable:!(r=gr(s,i))||r.enumerable});return e};var we=(e,s,o)=>(o=e!=null?mr(vr(e)):{},yr(s||!e||!e.__esModule?dt(o,"default",{value:e,enumerable:!0}):o,e));var ft=_e((dn,ht)=>{ht.exports=function(s,o,r){return new Promise((i,n)=>{let u=document.createElement("script");u.async=!0,u.src=s;for(let[_,b]of Object.entries(o||{}))u.setAttribute(_,b);u.onload=()=>{u.onerror=u.onload=null,i(u)},u.onerror=()=>{u.onerror=u.onload=null,n(new Error(`Failed to load ${s}`))},(r||document.head||document.getElementsByTagName("head")[0]).appendChild(u)})}});var mt=_e((pt,Ze)=>{(function(e){typeof pt=="object"&&typeof Ze!="undefined"?Ze.exports=e():typeof define=="function"&&define.amd?define([],e):(typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:this).JSZip=e()})(function(){return function e(s,o,r){function i(d,_){if(!o[d]){if(!s[d]){var b=typeof Te=="function"&&Te;if(!_&&b)return b(d,!0);if(n)return n(d,!0);var y=new Error("Cannot find module '"+d+"'");throw y.code="MODULE_NOT_FOUND",y}var l=o[d]={exports:{}};s[d][0].call(l.exports,function(v){var w=s[d][1][v];return i(w||v)},l,l.exports,e,s,o,r)}return o[d].exports}for(var n=typeof Te=="function"&&Te,u=0;u<r.length;u++)i(r[u]);return i}({1:[function(e,s,o){"use strict";var r=e("./utils"),i=e("./support"),n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";o.encode=function(u){for(var d,_,b,y,l,v,w,c=[],h=0,m=u.length,k=m,D=r.getTypeOf(u)!=="string";h<u.length;)k=m-h,b=D?(d=u[h++],_=h<m?u[h++]:0,h<m?u[h++]:0):(d=u.charCodeAt(h++),_=h<m?u.charCodeAt(h++):0,h<m?u.charCodeAt(h++):0),y=d>>2,l=(3&d)<<4|_>>4,v=1<k?(15&_)<<2|b>>6:64,w=2<k?63&b:64,c.push(n.charAt(y)+n.charAt(l)+n.charAt(v)+n.charAt(w));return c.join("")},o.decode=function(u){var d,_,b,y,l,v,w=0,c=0,h="data:";if(u.substr(0,h.length)===h)throw new Error("Invalid base64 input, it looks like a data url.");var m,k=3*(u=u.replace(/[^A-Za-z0-9\+\/\=]/g,"")).length/4;if(u.charAt(u.length-1)===n.charAt(64)&&k--,u.charAt(u.length-2)===n.charAt(64)&&k--,k%1!=0)throw new Error("Invalid base64 input, bad content length.");for(m=i.uint8array?new Uint8Array(0|k):new Array(0|k);w<u.length;)d=n.indexOf(u.charAt(w++))<<2|(y=n.indexOf(u.charAt(w++)))>>4,_=(15&y)<<4|(l=n.indexOf(u.charAt(w++)))>>2,b=(3&l)<<6|(v=n.indexOf(u.charAt(w++))),m[c++]=d,l!==64&&(m[c++]=_),v!==64&&(m[c++]=b);return m}},{"./support":30,"./utils":32}],2:[function(e,s,o){"use strict";var r=e("./external"),i=e("./stream/DataWorker"),n=e("./stream/Crc32Probe"),u=e("./stream/DataLengthProbe");function d(_,b,y,l,v){this.compressedSize=_,this.uncompressedSize=b,this.crc32=y,this.compression=l,this.compressedContent=v}d.prototype={getContentWorker:function(){var _=new i(r.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new u("data_length")),b=this;return _.on("end",function(){if(this.streamInfo.data_length!==b.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),_},getCompressedWorker:function(){return new i(r.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},d.createWorkerFrom=function(_,b,y){return _.pipe(new n).pipe(new u("uncompressedSize")).pipe(b.compressWorker(y)).pipe(new u("compressedSize")).withStreamInfo("compression",b)},s.exports=d},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(e,s,o){"use strict";var r=e("./stream/GenericWorker");o.STORE={magic:"\0\0",compressWorker:function(i){return new r("STORE compression")},uncompressWorker:function(){return new r("STORE decompression")}},o.DEFLATE=e("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(e,s,o){"use strict";var r=e("./utils"),i=function(){for(var n,u=[],d=0;d<256;d++){n=d;for(var _=0;_<8;_++)n=1&n?3988292384^n>>>1:n>>>1;u[d]=n}return u}();s.exports=function(n,u){return n!==void 0&&n.length?r.getTypeOf(n)!=="string"?function(d,_,b,y){var l=i,v=y+b;d^=-1;for(var w=y;w<v;w++)d=d>>>8^l[255&(d^_[w])];return-1^d}(0|u,n,n.length,0):function(d,_,b,y){var l=i,v=y+b;d^=-1;for(var w=y;w<v;w++)d=d>>>8^l[255&(d^_.charCodeAt(w))];return-1^d}(0|u,n,n.length,0):0}},{"./utils":32}],5:[function(e,s,o){"use strict";o.base64=!1,o.binary=!1,o.dir=!1,o.createFolders=!0,o.date=null,o.compression=null,o.compressionOptions=null,o.comment=null,o.unixPermissions=null,o.dosPermissions=null},{}],6:[function(e,s,o){"use strict";var r=null;r=typeof Promise!="undefined"?Promise:e("lie"),s.exports={Promise:r}},{lie:37}],7:[function(e,s,o){"use strict";var r=typeof Uint8Array!="undefined"&&typeof Uint16Array!="undefined"&&typeof Uint32Array!="undefined",i=e("pako"),n=e("./utils"),u=e("./stream/GenericWorker"),d=r?"uint8array":"array";function _(b,y){u.call(this,"FlateWorker/"+b),this._pako=null,this._pakoAction=b,this._pakoOptions=y,this.meta={}}o.magic="\b\0",n.inherits(_,u),_.prototype.processChunk=function(b){this.meta=b.meta,this._pako===null&&this._createPako(),this._pako.push(n.transformTo(d,b.data),!1)},_.prototype.flush=function(){u.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},_.prototype.cleanUp=function(){u.prototype.cleanUp.call(this),this._pako=null},_.prototype._createPako=function(){this._pako=new i[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var b=this;this._pako.onData=function(y){b.push({data:y,meta:b.meta})}},o.compressWorker=function(b){return new _("Deflate",b)},o.uncompressWorker=function(){return new _("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(e,s,o){"use strict";function r(l,v){var w,c="";for(w=0;w<v;w++)c+=String.fromCharCode(255&l),l>>>=8;return c}function i(l,v,w,c,h,m){var k,D,E=l.file,L=l.compression,R=m!==d.utf8encode,W=n.transformTo("string",m(E.name)),z=n.transformTo("string",d.utf8encode(E.name)),M=E.comment,K=n.transformTo("string",m(M)),p=n.transformTo("string",d.utf8encode(M)),S=z.length!==E.name.length,a=p.length!==M.length,O="",G="",N="",J=E.dir,U=E.date,Q={crc32:0,compressedSize:0,uncompressedSize:0};v&&!w||(Q.crc32=l.crc32,Q.compressedSize=l.compressedSize,Q.uncompressedSize=l.uncompressedSize);var C=0;v&&(C|=8),R||!S&&!a||(C|=2048);var T=0,V=0;J&&(T|=16),h==="UNIX"?(V=798,T|=function(H,se){var le=H;return H||(le=se?16893:33204),(65535&le)<<16}(E.unixPermissions,J)):(V=20,T|=function(H){return 63&(H||0)}(E.dosPermissions)),k=U.getUTCHours(),k<<=6,k|=U.getUTCMinutes(),k<<=5,k|=U.getUTCSeconds()/2,D=U.getUTCFullYear()-1980,D<<=4,D|=U.getUTCMonth()+1,D<<=5,D|=U.getUTCDate(),S&&(G=r(1,1)+r(_(W),4)+z,O+="up"+r(G.length,2)+G),a&&(N=r(1,1)+r(_(K),4)+p,O+="uc"+r(N.length,2)+N);var X="";return X+=`
\0`,X+=r(C,2),X+=L.magic,X+=r(k,2),X+=r(D,2),X+=r(Q.crc32,4),X+=r(Q.compressedSize,4),X+=r(Q.uncompressedSize,4),X+=r(W.length,2),X+=r(O.length,2),{fileRecord:b.LOCAL_FILE_HEADER+X+W+O,dirRecord:b.CENTRAL_FILE_HEADER+r(V,2)+X+r(K.length,2)+"\0\0\0\0"+r(T,4)+r(c,4)+W+O+K}}var n=e("../utils"),u=e("../stream/GenericWorker"),d=e("../utf8"),_=e("../crc32"),b=e("../signature");function y(l,v,w,c){u.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=v,this.zipPlatform=w,this.encodeFileName=c,this.streamFiles=l,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}n.inherits(y,u),y.prototype.push=function(l){var v=l.meta.percent||0,w=this.entriesCount,c=this._sources.length;this.accumulate?this.contentBuffer.push(l):(this.bytesWritten+=l.data.length,u.prototype.push.call(this,{data:l.data,meta:{currentFile:this.currentFile,percent:w?(v+100*(w-c-1))/w:100}}))},y.prototype.openedSource=function(l){this.currentSourceOffset=this.bytesWritten,this.currentFile=l.file.name;var v=this.streamFiles&&!l.file.dir;if(v){var w=i(l,v,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:w.fileRecord,meta:{percent:0}})}else this.accumulate=!0},y.prototype.closedSource=function(l){this.accumulate=!1;var v=this.streamFiles&&!l.file.dir,w=i(l,v,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(w.dirRecord),v)this.push({data:function(c){return b.DATA_DESCRIPTOR+r(c.crc32,4)+r(c.compressedSize,4)+r(c.uncompressedSize,4)}(l),meta:{percent:100}});else for(this.push({data:w.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},y.prototype.flush=function(){for(var l=this.bytesWritten,v=0;v<this.dirRecords.length;v++)this.push({data:this.dirRecords[v],meta:{percent:100}});var w=this.bytesWritten-l,c=function(h,m,k,D,E){var L=n.transformTo("string",E(D));return b.CENTRAL_DIRECTORY_END+"\0\0\0\0"+r(h,2)+r(h,2)+r(m,4)+r(k,4)+r(L.length,2)+L}(this.dirRecords.length,w,l,this.zipComment,this.encodeFileName);this.push({data:c,meta:{percent:100}})},y.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},y.prototype.registerPrevious=function(l){this._sources.push(l);var v=this;return l.on("data",function(w){v.processChunk(w)}),l.on("end",function(){v.closedSource(v.previous.streamInfo),v._sources.length?v.prepareNextSource():v.end()}),l.on("error",function(w){v.error(w)}),this},y.prototype.resume=function(){return!!u.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},y.prototype.error=function(l){var v=this._sources;if(!u.prototype.error.call(this,l))return!1;for(var w=0;w<v.length;w++)try{v[w].error(l)}catch(c){}return!0},y.prototype.lock=function(){u.prototype.lock.call(this);for(var l=this._sources,v=0;v<l.length;v++)l[v].lock()},s.exports=y},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(e,s,o){"use strict";var r=e("../compressions"),i=e("./ZipFileWorker");o.generateWorker=function(n,u,d){var _=new i(u.streamFiles,d,u.platform,u.encodeFileName),b=0;try{n.forEach(function(y,l){b++;var v=function(m,k){var D=m||k,E=r[D];if(!E)throw new Error(D+" is not a valid compression method !");return E}(l.options.compression,u.compression),w=l.options.compressionOptions||u.compressionOptions||{},c=l.dir,h=l.date;l._compressWorker(v,w).withStreamInfo("file",{name:y,dir:c,date:h,comment:l.comment||"",unixPermissions:l.unixPermissions,dosPermissions:l.dosPermissions}).pipe(_)}),_.entriesCount=b}catch(y){_.error(y)}return _}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(e,s,o){"use strict";function r(){if(!(this instanceof r))return new r;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var i=new r;for(var n in this)typeof this[n]!="function"&&(i[n]=this[n]);return i}}(r.prototype=e("./object")).loadAsync=e("./load"),r.support=e("./support"),r.defaults=e("./defaults"),r.version="3.7.1",r.loadAsync=function(i,n){return new r().loadAsync(i,n)},r.external=e("./external"),s.exports=r},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(e,s,o){"use strict";var r=e("./utils"),i=e("./external"),n=e("./utf8"),u=e("./zipEntries"),d=e("./stream/Crc32Probe"),_=e("./nodejsUtils");function b(y){return new i.Promise(function(l,v){var w=y.decompressed.getContentWorker().pipe(new d);w.on("error",function(c){v(c)}).on("end",function(){w.streamInfo.crc32!==y.decompressed.crc32?v(new Error("Corrupted zip : CRC32 mismatch")):l()}).resume()})}s.exports=function(y,l){var v=this;return l=r.extend(l||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:n.utf8decode}),_.isNode&&_.isStream(y)?i.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):r.prepareContent("the loaded zip file",y,!0,l.optimizedBinaryString,l.base64).then(function(w){var c=new u(l);return c.load(w),c}).then(function(w){var c=[i.Promise.resolve(w)],h=w.files;if(l.checkCRC32)for(var m=0;m<h.length;m++)c.push(b(h[m]));return i.Promise.all(c)}).then(function(w){for(var c=w.shift(),h=c.files,m=0;m<h.length;m++){var k=h[m];v.file(k.fileNameStr,k.decompressed,{binary:!0,optimizedBinaryString:!0,date:k.date,dir:k.dir,comment:k.fileCommentStr.length?k.fileCommentStr:null,unixPermissions:k.unixPermissions,dosPermissions:k.dosPermissions,createFolders:l.createFolders})}return c.zipComment.length&&(v.comment=c.zipComment),v})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(e,s,o){"use strict";var r=e("../utils"),i=e("../stream/GenericWorker");function n(u,d){i.call(this,"Nodejs stream input adapter for "+u),this._upstreamEnded=!1,this._bindStream(d)}r.inherits(n,i),n.prototype._bindStream=function(u){var d=this;(this._stream=u).pause(),u.on("data",function(_){d.push({data:_,meta:{percent:0}})}).on("error",function(_){d.isPaused?this.generatedError=_:d.error(_)}).on("end",function(){d.isPaused?d._upstreamEnded=!0:d.end()})},n.prototype.pause=function(){return!!i.prototype.pause.call(this)&&(this._stream.pause(),!0)},n.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},s.exports=n},{"../stream/GenericWorker":28,"../utils":32}],13:[function(e,s,o){"use strict";var r=e("readable-stream").Readable;function i(n,u,d){r.call(this,u),this._helper=n;var _=this;n.on("data",function(b,y){_.push(b)||_._helper.pause(),d&&d(y)}).on("error",function(b){_.emit("error",b)}).on("end",function(){_.push(null)})}e("../utils").inherits(i,r),i.prototype._read=function(){this._helper.resume()},s.exports=i},{"../utils":32,"readable-stream":16}],14:[function(e,s,o){"use strict";s.exports={isNode:typeof Buffer!="undefined",newBufferFrom:function(r,i){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(r,i);if(typeof r=="number")throw new Error('The "data" argument must not be a number');return new Buffer(r,i)},allocBuffer:function(r){if(Buffer.alloc)return Buffer.alloc(r);var i=new Buffer(r);return i.fill(0),i},isBuffer:function(r){return Buffer.isBuffer(r)},isStream:function(r){return r&&typeof r.on=="function"&&typeof r.pause=="function"&&typeof r.resume=="function"}}},{}],15:[function(e,s,o){"use strict";function r(E,L,R){var W,z=n.getTypeOf(L),M=n.extend(R||{},_);M.date=M.date||new Date,M.compression!==null&&(M.compression=M.compression.toUpperCase()),typeof M.unixPermissions=="string"&&(M.unixPermissions=parseInt(M.unixPermissions,8)),M.unixPermissions&&16384&M.unixPermissions&&(M.dir=!0),M.dosPermissions&&16&M.dosPermissions&&(M.dir=!0),M.dir&&(E=h(E)),M.createFolders&&(W=c(E))&&m.call(this,W,!0);var K=z==="string"&&M.binary===!1&&M.base64===!1;R&&R.binary!==void 0||(M.binary=!K),(L instanceof b&&L.uncompressedSize===0||M.dir||!L||L.length===0)&&(M.base64=!1,M.binary=!0,L="",M.compression="STORE",z="string");var p=null;p=L instanceof b||L instanceof u?L:v.isNode&&v.isStream(L)?new w(E,L):n.prepareContent(E,L,M.binary,M.optimizedBinaryString,M.base64);var S=new y(E,p,M);this.files[E]=S}var i=e("./utf8"),n=e("./utils"),u=e("./stream/GenericWorker"),d=e("./stream/StreamHelper"),_=e("./defaults"),b=e("./compressedObject"),y=e("./zipObject"),l=e("./generate"),v=e("./nodejsUtils"),w=e("./nodejs/NodejsStreamInputAdapter"),c=function(E){E.slice(-1)==="/"&&(E=E.substring(0,E.length-1));var L=E.lastIndexOf("/");return 0<L?E.substring(0,L):""},h=function(E){return E.slice(-1)!=="/"&&(E+="/"),E},m=function(E,L){return L=L!==void 0?L:_.createFolders,E=h(E),this.files[E]||r.call(this,E,null,{dir:!0,createFolders:L}),this.files[E]};function k(E){return Object.prototype.toString.call(E)==="[object RegExp]"}var D={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(E){var L,R,W;for(L in this.files)W=this.files[L],(R=L.slice(this.root.length,L.length))&&L.slice(0,this.root.length)===this.root&&E(R,W)},filter:function(E){var L=[];return this.forEach(function(R,W){E(R,W)&&L.push(W)}),L},file:function(E,L,R){if(arguments.length!==1)return E=this.root+E,r.call(this,E,L,R),this;if(k(E)){var W=E;return this.filter(function(M,K){return!K.dir&&W.test(M)})}var z=this.files[this.root+E];return z&&!z.dir?z:null},folder:function(E){if(!E)return this;if(k(E))return this.filter(function(z,M){return M.dir&&E.test(z)});var L=this.root+E,R=m.call(this,L),W=this.clone();return W.root=R.name,W},remove:function(E){E=this.root+E;var L=this.files[E];if(L||(E.slice(-1)!=="/"&&(E+="/"),L=this.files[E]),L&&!L.dir)delete this.files[E];else for(var R=this.filter(function(z,M){return M.name.slice(0,E.length)===E}),W=0;W<R.length;W++)delete this.files[R[W].name];return this},generate:function(E){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(E){var L,R={};try{if((R=n.extend(E||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:i.utf8encode})).type=R.type.toLowerCase(),R.compression=R.compression.toUpperCase(),R.type==="binarystring"&&(R.type="string"),!R.type)throw new Error("No output type specified.");n.checkSupport(R.type),R.platform!=="darwin"&&R.platform!=="freebsd"&&R.platform!=="linux"&&R.platform!=="sunos"||(R.platform="UNIX"),R.platform==="win32"&&(R.platform="DOS");var W=R.comment||this.comment||"";L=l.generateWorker(this,R,W)}catch(z){(L=new u("error")).error(z)}return new d(L,R.type||"string",R.mimeType)},generateAsync:function(E,L){return this.generateInternalStream(E).accumulate(L)},generateNodeStream:function(E,L){return(E=E||{}).type||(E.type="nodebuffer"),this.generateInternalStream(E).toNodejsStream(L)}};s.exports=D},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(e,s,o){s.exports=e("stream")},{stream:void 0}],17:[function(e,s,o){"use strict";var r=e("./DataReader");function i(n){r.call(this,n);for(var u=0;u<this.data.length;u++)n[u]=255&n[u]}e("../utils").inherits(i,r),i.prototype.byteAt=function(n){return this.data[this.zero+n]},i.prototype.lastIndexOfSignature=function(n){for(var u=n.charCodeAt(0),d=n.charCodeAt(1),_=n.charCodeAt(2),b=n.charCodeAt(3),y=this.length-4;0<=y;--y)if(this.data[y]===u&&this.data[y+1]===d&&this.data[y+2]===_&&this.data[y+3]===b)return y-this.zero;return-1},i.prototype.readAndCheckSignature=function(n){var u=n.charCodeAt(0),d=n.charCodeAt(1),_=n.charCodeAt(2),b=n.charCodeAt(3),y=this.readData(4);return u===y[0]&&d===y[1]&&_===y[2]&&b===y[3]},i.prototype.readData=function(n){if(this.checkOffset(n),n===0)return[];var u=this.data.slice(this.zero+this.index,this.zero+this.index+n);return this.index+=n,u},s.exports=i},{"../utils":32,"./DataReader":18}],18:[function(e,s,o){"use strict";var r=e("../utils");function i(n){this.data=n,this.length=n.length,this.index=0,this.zero=0}i.prototype={checkOffset:function(n){this.checkIndex(this.index+n)},checkIndex:function(n){if(this.length<this.zero+n||n<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+n+"). Corrupted zip ?")},setIndex:function(n){this.checkIndex(n),this.index=n},skip:function(n){this.setIndex(this.index+n)},byteAt:function(n){},readInt:function(n){var u,d=0;for(this.checkOffset(n),u=this.index+n-1;u>=this.index;u--)d=(d<<8)+this.byteAt(u);return this.index+=n,d},readString:function(n){return r.transformTo("string",this.readData(n))},readData:function(n){},lastIndexOfSignature:function(n){},readAndCheckSignature:function(n){},readDate:function(){var n=this.readInt(4);return new Date(Date.UTC(1980+(n>>25&127),(n>>21&15)-1,n>>16&31,n>>11&31,n>>5&63,(31&n)<<1))}},s.exports=i},{"../utils":32}],19:[function(e,s,o){"use strict";var r=e("./Uint8ArrayReader");function i(n){r.call(this,n)}e("../utils").inherits(i,r),i.prototype.readData=function(n){this.checkOffset(n);var u=this.data.slice(this.zero+this.index,this.zero+this.index+n);return this.index+=n,u},s.exports=i},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(e,s,o){"use strict";var r=e("./DataReader");function i(n){r.call(this,n)}e("../utils").inherits(i,r),i.prototype.byteAt=function(n){return this.data.charCodeAt(this.zero+n)},i.prototype.lastIndexOfSignature=function(n){return this.data.lastIndexOf(n)-this.zero},i.prototype.readAndCheckSignature=function(n){return n===this.readData(4)},i.prototype.readData=function(n){this.checkOffset(n);var u=this.data.slice(this.zero+this.index,this.zero+this.index+n);return this.index+=n,u},s.exports=i},{"../utils":32,"./DataReader":18}],21:[function(e,s,o){"use strict";var r=e("./ArrayReader");function i(n){r.call(this,n)}e("../utils").inherits(i,r),i.prototype.readData=function(n){if(this.checkOffset(n),n===0)return new Uint8Array(0);var u=this.data.subarray(this.zero+this.index,this.zero+this.index+n);return this.index+=n,u},s.exports=i},{"../utils":32,"./ArrayReader":17}],22:[function(e,s,o){"use strict";var r=e("../utils"),i=e("../support"),n=e("./ArrayReader"),u=e("./StringReader"),d=e("./NodeBufferReader"),_=e("./Uint8ArrayReader");s.exports=function(b){var y=r.getTypeOf(b);return r.checkSupport(y),y!=="string"||i.uint8array?y==="nodebuffer"?new d(b):i.uint8array?new _(r.transformTo("uint8array",b)):new n(r.transformTo("array",b)):new u(b)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(e,s,o){"use strict";o.LOCAL_FILE_HEADER="PK",o.CENTRAL_FILE_HEADER="PK",o.CENTRAL_DIRECTORY_END="PK",o.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",o.ZIP64_CENTRAL_DIRECTORY_END="PK",o.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(e,s,o){"use strict";var r=e("./GenericWorker"),i=e("../utils");function n(u){r.call(this,"ConvertWorker to "+u),this.destType=u}i.inherits(n,r),n.prototype.processChunk=function(u){this.push({data:i.transformTo(this.destType,u.data),meta:u.meta})},s.exports=n},{"../utils":32,"./GenericWorker":28}],25:[function(e,s,o){"use strict";var r=e("./GenericWorker"),i=e("../crc32");function n(){r.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}e("../utils").inherits(n,r),n.prototype.processChunk=function(u){this.streamInfo.crc32=i(u.data,this.streamInfo.crc32||0),this.push(u)},s.exports=n},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(e,s,o){"use strict";var r=e("../utils"),i=e("./GenericWorker");function n(u){i.call(this,"DataLengthProbe for "+u),this.propName=u,this.withStreamInfo(u,0)}r.inherits(n,i),n.prototype.processChunk=function(u){if(u){var d=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=d+u.data.length}i.prototype.processChunk.call(this,u)},s.exports=n},{"../utils":32,"./GenericWorker":28}],27:[function(e,s,o){"use strict";var r=e("../utils"),i=e("./GenericWorker");function n(u){i.call(this,"DataWorker");var d=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,u.then(function(_){d.dataIsReady=!0,d.data=_,d.max=_&&_.length||0,d.type=r.getTypeOf(_),d.isPaused||d._tickAndRepeat()},function(_){d.error(_)})}r.inherits(n,i),n.prototype.cleanUp=function(){i.prototype.cleanUp.call(this),this.data=null},n.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,r.delay(this._tickAndRepeat,[],this)),!0)},n.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(r.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},n.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var u=null,d=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":u=this.data.substring(this.index,d);break;case"uint8array":u=this.data.subarray(this.index,d);break;case"array":case"nodebuffer":u=this.data.slice(this.index,d)}return this.index=d,this.push({data:u,meta:{percent:this.max?this.index/this.max*100:0}})},s.exports=n},{"../utils":32,"./GenericWorker":28}],28:[function(e,s,o){"use strict";function r(i){this.name=i||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}r.prototype={push:function(i){this.emit("data",i)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(i){this.emit("error",i)}return!0},error:function(i){return!this.isFinished&&(this.isPaused?this.generatedError=i:(this.isFinished=!0,this.emit("error",i),this.previous&&this.previous.error(i),this.cleanUp()),!0)},on:function(i,n){return this._listeners[i].push(n),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(i,n){if(this._listeners[i])for(var u=0;u<this._listeners[i].length;u++)this._listeners[i][u].call(this,n)},pipe:function(i){return i.registerPrevious(this)},registerPrevious:function(i){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=i.streamInfo,this.mergeStreamInfo(),this.previous=i;var n=this;return i.on("data",function(u){n.processChunk(u)}),i.on("end",function(){n.end()}),i.on("error",function(u){n.error(u)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var i=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),i=!0),this.previous&&this.previous.resume(),!i},flush:function(){},processChunk:function(i){this.push(i)},withStreamInfo:function(i,n){return this.extraStreamInfo[i]=n,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var i in this.extraStreamInfo)this.extraStreamInfo.hasOwnProperty(i)&&(this.streamInfo[i]=this.extraStreamInfo[i])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var i="Worker "+this.name;return this.previous?this.previous+" -> "+i:i}},s.exports=r},{}],29:[function(e,s,o){"use strict";var r=e("../utils"),i=e("./ConvertWorker"),n=e("./GenericWorker"),u=e("../base64"),d=e("../support"),_=e("../external"),b=null;if(d.nodestream)try{b=e("../nodejs/NodejsStreamOutputAdapter")}catch(v){}function y(v,w){return new _.Promise(function(c,h){var m=[],k=v._internalType,D=v._outputType,E=v._mimeType;v.on("data",function(L,R){m.push(L),w&&w(R)}).on("error",function(L){m=[],h(L)}).on("end",function(){try{var L=function(R,W,z){switch(R){case"blob":return r.newBlob(r.transformTo("arraybuffer",W),z);case"base64":return u.encode(W);default:return r.transformTo(R,W)}}(D,function(R,W){var z,M=0,K=null,p=0;for(z=0;z<W.length;z++)p+=W[z].length;switch(R){case"string":return W.join("");case"array":return Array.prototype.concat.apply([],W);case"uint8array":for(K=new Uint8Array(p),z=0;z<W.length;z++)K.set(W[z],M),M+=W[z].length;return K;case"nodebuffer":return Buffer.concat(W);default:throw new Error("concat : unsupported type '"+R+"'")}}(k,m),E);c(L)}catch(R){h(R)}m=[]}).resume()})}function l(v,w,c){var h=w;switch(w){case"blob":case"arraybuffer":h="uint8array";break;case"base64":h="string"}try{this._internalType=h,this._outputType=w,this._mimeType=c,r.checkSupport(h),this._worker=v.pipe(new i(h)),v.lock()}catch(m){this._worker=new n("error"),this._worker.error(m)}}l.prototype={accumulate:function(v){return y(this,v)},on:function(v,w){var c=this;return v==="data"?this._worker.on(v,function(h){w.call(c,h.data,h.meta)}):this._worker.on(v,function(){r.delay(w,arguments,c)}),this},resume:function(){return r.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(v){if(r.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new b(this,{objectMode:this._outputType!=="nodebuffer"},v)}},s.exports=l},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(e,s,o){"use strict";if(o.base64=!0,o.array=!0,o.string=!0,o.arraybuffer=typeof ArrayBuffer!="undefined"&&typeof Uint8Array!="undefined",o.nodebuffer=typeof Buffer!="undefined",o.uint8array=typeof Uint8Array!="undefined",typeof ArrayBuffer=="undefined")o.blob=!1;else{var r=new ArrayBuffer(0);try{o.blob=new Blob([r],{type:"application/zip"}).size===0}catch(n){try{var i=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);i.append(r),o.blob=i.getBlob("application/zip").size===0}catch(u){o.blob=!1}}}try{o.nodestream=!!e("readable-stream").Readable}catch(n){o.nodestream=!1}},{"readable-stream":16}],31:[function(e,s,o){"use strict";for(var r=e("./utils"),i=e("./support"),n=e("./nodejsUtils"),u=e("./stream/GenericWorker"),d=new Array(256),_=0;_<256;_++)d[_]=252<=_?6:248<=_?5:240<=_?4:224<=_?3:192<=_?2:1;d[254]=d[254]=1;function b(){u.call(this,"utf-8 decode"),this.leftOver=null}function y(){u.call(this,"utf-8 encode")}o.utf8encode=function(l){return i.nodebuffer?n.newBufferFrom(l,"utf-8"):function(v){var w,c,h,m,k,D=v.length,E=0;for(m=0;m<D;m++)(64512&(c=v.charCodeAt(m)))==55296&&m+1<D&&(64512&(h=v.charCodeAt(m+1)))==56320&&(c=65536+(c-55296<<10)+(h-56320),m++),E+=c<128?1:c<2048?2:c<65536?3:4;for(w=i.uint8array?new Uint8Array(E):new Array(E),m=k=0;k<E;m++)(64512&(c=v.charCodeAt(m)))==55296&&m+1<D&&(64512&(h=v.charCodeAt(m+1)))==56320&&(c=65536+(c-55296<<10)+(h-56320),m++),c<128?w[k++]=c:(c<2048?w[k++]=192|c>>>6:(c<65536?w[k++]=224|c>>>12:(w[k++]=240|c>>>18,w[k++]=128|c>>>12&63),w[k++]=128|c>>>6&63),w[k++]=128|63&c);return w}(l)},o.utf8decode=function(l){return i.nodebuffer?r.transformTo("nodebuffer",l).toString("utf-8"):function(v){var w,c,h,m,k=v.length,D=new Array(2*k);for(w=c=0;w<k;)if((h=v[w++])<128)D[c++]=h;else if(4<(m=d[h]))D[c++]=65533,w+=m-1;else{for(h&=m===2?31:m===3?15:7;1<m&&w<k;)h=h<<6|63&v[w++],m--;1<m?D[c++]=65533:h<65536?D[c++]=h:(h-=65536,D[c++]=55296|h>>10&1023,D[c++]=56320|1023&h)}return D.length!==c&&(D.subarray?D=D.subarray(0,c):D.length=c),r.applyFromCharCode(D)}(l=r.transformTo(i.uint8array?"uint8array":"array",l))},r.inherits(b,u),b.prototype.processChunk=function(l){var v=r.transformTo(i.uint8array?"uint8array":"array",l.data);if(this.leftOver&&this.leftOver.length){if(i.uint8array){var w=v;(v=new Uint8Array(w.length+this.leftOver.length)).set(this.leftOver,0),v.set(w,this.leftOver.length)}else v=this.leftOver.concat(v);this.leftOver=null}var c=function(m,k){var D;for((k=k||m.length)>m.length&&(k=m.length),D=k-1;0<=D&&(192&m[D])==128;)D--;return D<0||D===0?k:D+d[m[D]]>k?D:k}(v),h=v;c!==v.length&&(i.uint8array?(h=v.subarray(0,c),this.leftOver=v.subarray(c,v.length)):(h=v.slice(0,c),this.leftOver=v.slice(c,v.length))),this.push({data:o.utf8decode(h),meta:l.meta})},b.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:o.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},o.Utf8DecodeWorker=b,r.inherits(y,u),y.prototype.processChunk=function(l){this.push({data:o.utf8encode(l.data),meta:l.meta})},o.Utf8EncodeWorker=y},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(e,s,o){"use strict";var r=e("./support"),i=e("./base64"),n=e("./nodejsUtils"),u=e("set-immediate-shim"),d=e("./external");function _(c){return c}function b(c,h){for(var m=0;m<c.length;++m)h[m]=255&c.charCodeAt(m);return h}o.newBlob=function(c,h){o.checkSupport("blob");try{return new Blob([c],{type:h})}catch(k){try{var m=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return m.append(c),m.getBlob(h)}catch(D){throw new Error("Bug : can't construct the Blob.")}}};var y={stringifyByChunk:function(c,h,m){var k=[],D=0,E=c.length;if(E<=m)return String.fromCharCode.apply(null,c);for(;D<E;)h==="array"||h==="nodebuffer"?k.push(String.fromCharCode.apply(null,c.slice(D,Math.min(D+m,E)))):k.push(String.fromCharCode.apply(null,c.subarray(D,Math.min(D+m,E)))),D+=m;return k.join("")},stringifyByChar:function(c){for(var h="",m=0;m<c.length;m++)h+=String.fromCharCode(c[m]);return h},applyCanBeUsed:{uint8array:function(){try{return r.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch(c){return!1}}(),nodebuffer:function(){try{return r.nodebuffer&&String.fromCharCode.apply(null,n.allocBuffer(1)).length===1}catch(c){return!1}}()}};function l(c){var h=65536,m=o.getTypeOf(c),k=!0;if(m==="uint8array"?k=y.applyCanBeUsed.uint8array:m==="nodebuffer"&&(k=y.applyCanBeUsed.nodebuffer),k)for(;1<h;)try{return y.stringifyByChunk(c,m,h)}catch(D){h=Math.floor(h/2)}return y.stringifyByChar(c)}function v(c,h){for(var m=0;m<c.length;m++)h[m]=c[m];return h}o.applyFromCharCode=l;var w={};w.string={string:_,array:function(c){return b(c,new Array(c.length))},arraybuffer:function(c){return w.string.uint8array(c).buffer},uint8array:function(c){return b(c,new Uint8Array(c.length))},nodebuffer:function(c){return b(c,n.allocBuffer(c.length))}},w.array={string:l,array:_,arraybuffer:function(c){return new Uint8Array(c).buffer},uint8array:function(c){return new Uint8Array(c)},nodebuffer:function(c){return n.newBufferFrom(c)}},w.arraybuffer={string:function(c){return l(new Uint8Array(c))},array:function(c){return v(new Uint8Array(c),new Array(c.byteLength))},arraybuffer:_,uint8array:function(c){return new Uint8Array(c)},nodebuffer:function(c){return n.newBufferFrom(new Uint8Array(c))}},w.uint8array={string:l,array:function(c){return v(c,new Array(c.length))},arraybuffer:function(c){return c.buffer},uint8array:_,nodebuffer:function(c){return n.newBufferFrom(c)}},w.nodebuffer={string:l,array:function(c){return v(c,new Array(c.length))},arraybuffer:function(c){return w.nodebuffer.uint8array(c).buffer},uint8array:function(c){return v(c,new Uint8Array(c.length))},nodebuffer:_},o.transformTo=function(c,h){if(h=h||"",!c)return h;o.checkSupport(c);var m=o.getTypeOf(h);return w[m][c](h)},o.getTypeOf=function(c){return typeof c=="string"?"string":Object.prototype.toString.call(c)==="[object Array]"?"array":r.nodebuffer&&n.isBuffer(c)?"nodebuffer":r.uint8array&&c instanceof Uint8Array?"uint8array":r.arraybuffer&&c instanceof ArrayBuffer?"arraybuffer":void 0},o.checkSupport=function(c){if(!r[c.toLowerCase()])throw new Error(c+" is not supported by this platform")},o.MAX_VALUE_16BITS=65535,o.MAX_VALUE_32BITS=-1,o.pretty=function(c){var h,m,k="";for(m=0;m<(c||"").length;m++)k+="\\x"+((h=c.charCodeAt(m))<16?"0":"")+h.toString(16).toUpperCase();return k},o.delay=function(c,h,m){u(function(){c.apply(m||null,h||[])})},o.inherits=function(c,h){function m(){}m.prototype=h.prototype,c.prototype=new m},o.extend=function(){var c,h,m={};for(c=0;c<arguments.length;c++)for(h in arguments[c])arguments[c].hasOwnProperty(h)&&m[h]===void 0&&(m[h]=arguments[c][h]);return m},o.prepareContent=function(c,h,m,k,D){return d.Promise.resolve(h).then(function(E){return r.blob&&(E instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(E))!==-1)&&typeof FileReader!="undefined"?new d.Promise(function(L,R){var W=new FileReader;W.onload=function(z){L(z.target.result)},W.onerror=function(z){R(z.target.error)},W.readAsArrayBuffer(E)}):E}).then(function(E){var L=o.getTypeOf(E);return L?(L==="arraybuffer"?E=o.transformTo("uint8array",E):L==="string"&&(D?E=i.decode(E):m&&k!==!0&&(E=function(R){return b(R,r.uint8array?new Uint8Array(R.length):new Array(R.length))}(E))),E):d.Promise.reject(new Error("Can't read the data of '"+c+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,"set-immediate-shim":54}],33:[function(e,s,o){"use strict";var r=e("./reader/readerFor"),i=e("./utils"),n=e("./signature"),u=e("./zipEntry"),d=(e("./utf8"),e("./support"));function _(b){this.files=[],this.loadOptions=b}_.prototype={checkSignature:function(b){if(!this.reader.readAndCheckSignature(b)){this.reader.index-=4;var y=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+i.pretty(y)+", expected "+i.pretty(b)+")")}},isSignature:function(b,y){var l=this.reader.index;this.reader.setIndex(b);var v=this.reader.readString(4)===y;return this.reader.setIndex(l),v},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var b=this.reader.readData(this.zipCommentLength),y=d.uint8array?"uint8array":"array",l=i.transformTo(y,b);this.zipComment=this.loadOptions.decodeFileName(l)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var b,y,l,v=this.zip64EndOfCentralSize-44;0<v;)b=this.reader.readInt(2),y=this.reader.readInt(4),l=this.reader.readData(y),this.zip64ExtensibleData[b]={id:b,length:y,value:l}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var b,y;for(b=0;b<this.files.length;b++)y=this.files[b],this.reader.setIndex(y.localHeaderOffset),this.checkSignature(n.LOCAL_FILE_HEADER),y.readLocalPart(this.reader),y.handleUTF8(),y.processAttributes()},readCentralDir:function(){var b;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(n.CENTRAL_FILE_HEADER);)(b=new u({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(b);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var b=this.reader.lastIndexOfSignature(n.CENTRAL_DIRECTORY_END);if(b<0)throw this.isSignature(0,n.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(b);var y=b;if(this.checkSignature(n.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===i.MAX_VALUE_16BITS||this.diskWithCentralDirStart===i.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===i.MAX_VALUE_16BITS||this.centralDirRecords===i.MAX_VALUE_16BITS||this.centralDirSize===i.MAX_VALUE_32BITS||this.centralDirOffset===i.MAX_VALUE_32BITS){if(this.zip64=!0,(b=this.reader.lastIndexOfSignature(n.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(b),this.checkSignature(n.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,n.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(n.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(n.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var l=this.centralDirOffset+this.centralDirSize;this.zip64&&(l+=20,l+=12+this.zip64EndOfCentralSize);var v=y-l;if(0<v)this.isSignature(y,n.CENTRAL_FILE_HEADER)||(this.reader.zero=v);else if(v<0)throw new Error("Corrupted zip: missing "+Math.abs(v)+" bytes.")},prepareReader:function(b){this.reader=r(b)},load:function(b){this.prepareReader(b),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},s.exports=_},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utf8":31,"./utils":32,"./zipEntry":34}],34:[function(e,s,o){"use strict";var r=e("./reader/readerFor"),i=e("./utils"),n=e("./compressedObject"),u=e("./crc32"),d=e("./utf8"),_=e("./compressions"),b=e("./support");function y(l,v){this.options=l,this.loadOptions=v}y.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(l){var v,w;if(l.skip(22),this.fileNameLength=l.readInt(2),w=l.readInt(2),this.fileName=l.readData(this.fileNameLength),l.skip(w),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((v=function(c){for(var h in _)if(_.hasOwnProperty(h)&&_[h].magic===c)return _[h];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+i.pretty(this.compressionMethod)+" unknown (inner file : "+i.transformTo("string",this.fileName)+")");this.decompressed=new n(this.compressedSize,this.uncompressedSize,this.crc32,v,l.readData(this.compressedSize))},readCentralPart:function(l){this.versionMadeBy=l.readInt(2),l.skip(2),this.bitFlag=l.readInt(2),this.compressionMethod=l.readString(2),this.date=l.readDate(),this.crc32=l.readInt(4),this.compressedSize=l.readInt(4),this.uncompressedSize=l.readInt(4);var v=l.readInt(2);if(this.extraFieldsLength=l.readInt(2),this.fileCommentLength=l.readInt(2),this.diskNumberStart=l.readInt(2),this.internalFileAttributes=l.readInt(2),this.externalFileAttributes=l.readInt(4),this.localHeaderOffset=l.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");l.skip(v),this.readExtraFields(l),this.parseZIP64ExtraField(l),this.fileComment=l.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var l=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),l==0&&(this.dosPermissions=63&this.externalFileAttributes),l==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(l){if(this.extraFields[1]){var v=r(this.extraFields[1].value);this.uncompressedSize===i.MAX_VALUE_32BITS&&(this.uncompressedSize=v.readInt(8)),this.compressedSize===i.MAX_VALUE_32BITS&&(this.compressedSize=v.readInt(8)),this.localHeaderOffset===i.MAX_VALUE_32BITS&&(this.localHeaderOffset=v.readInt(8)),this.diskNumberStart===i.MAX_VALUE_32BITS&&(this.diskNumberStart=v.readInt(4))}},readExtraFields:function(l){var v,w,c,h=l.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});l.index+4<h;)v=l.readInt(2),w=l.readInt(2),c=l.readData(w),this.extraFields[v]={id:v,length:w,value:c};l.setIndex(h)},handleUTF8:function(){var l=b.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=d.utf8decode(this.fileName),this.fileCommentStr=d.utf8decode(this.fileComment);else{var v=this.findExtraFieldUnicodePath();if(v!==null)this.fileNameStr=v;else{var w=i.transformTo(l,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(w)}var c=this.findExtraFieldUnicodeComment();if(c!==null)this.fileCommentStr=c;else{var h=i.transformTo(l,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(h)}}},findExtraFieldUnicodePath:function(){var l=this.extraFields[28789];if(l){var v=r(l.value);return v.readInt(1)!==1||u(this.fileName)!==v.readInt(4)?null:d.utf8decode(v.readData(l.length-5))}return null},findExtraFieldUnicodeComment:function(){var l=this.extraFields[25461];if(l){var v=r(l.value);return v.readInt(1)!==1||u(this.fileComment)!==v.readInt(4)?null:d.utf8decode(v.readData(l.length-5))}return null}},s.exports=y},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(e,s,o){"use strict";function r(v,w,c){this.name=v,this.dir=c.dir,this.date=c.date,this.comment=c.comment,this.unixPermissions=c.unixPermissions,this.dosPermissions=c.dosPermissions,this._data=w,this._dataBinary=c.binary,this.options={compression:c.compression,compressionOptions:c.compressionOptions}}var i=e("./stream/StreamHelper"),n=e("./stream/DataWorker"),u=e("./utf8"),d=e("./compressedObject"),_=e("./stream/GenericWorker");r.prototype={internalStream:function(v){var w=null,c="string";try{if(!v)throw new Error("No output type specified.");var h=(c=v.toLowerCase())==="string"||c==="text";c!=="binarystring"&&c!=="text"||(c="string"),w=this._decompressWorker();var m=!this._dataBinary;m&&!h&&(w=w.pipe(new u.Utf8EncodeWorker)),!m&&h&&(w=w.pipe(new u.Utf8DecodeWorker))}catch(k){(w=new _("error")).error(k)}return new i(w,c,"")},async:function(v,w){return this.internalStream(v).accumulate(w)},nodeStream:function(v,w){return this.internalStream(v||"nodebuffer").toNodejsStream(w)},_compressWorker:function(v,w){if(this._data instanceof d&&this._data.compression.magic===v.magic)return this._data.getCompressedWorker();var c=this._decompressWorker();return this._dataBinary||(c=c.pipe(new u.Utf8EncodeWorker)),d.createWorkerFrom(c,v,w)},_decompressWorker:function(){return this._data instanceof d?this._data.getContentWorker():this._data instanceof _?this._data:new n(this._data)}};for(var b=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],y=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},l=0;l<b.length;l++)r.prototype[b[l]]=y;s.exports=r},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(e,s,o){(function(r){"use strict";var i,n,u=r.MutationObserver||r.WebKitMutationObserver;if(u){var d=0,_=new u(v),b=r.document.createTextNode("");_.observe(b,{characterData:!0}),i=function(){b.data=d=++d%2}}else if(r.setImmediate||r.MessageChannel===void 0)i="document"in r&&"onreadystatechange"in r.document.createElement("script")?function(){var w=r.document.createElement("script");w.onreadystatechange=function(){v(),w.onreadystatechange=null,w.parentNode.removeChild(w),w=null},r.document.documentElement.appendChild(w)}:function(){setTimeout(v,0)};else{var y=new r.MessageChannel;y.port1.onmessage=v,i=function(){y.port2.postMessage(0)}}var l=[];function v(){var w,c;n=!0;for(var h=l.length;h;){for(c=l,l=[],w=-1;++w<h;)c[w]();h=l.length}n=!1}s.exports=function(w){l.push(w)!==1||n||i()}}).call(this,typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}],37:[function(e,s,o){"use strict";var r=e("immediate");function i(){}var n={},u=["REJECTED"],d=["FULFILLED"],_=["PENDING"];function b(h){if(typeof h!="function")throw new TypeError("resolver must be a function");this.state=_,this.queue=[],this.outcome=void 0,h!==i&&w(this,h)}function y(h,m,k){this.promise=h,typeof m=="function"&&(this.onFulfilled=m,this.callFulfilled=this.otherCallFulfilled),typeof k=="function"&&(this.onRejected=k,this.callRejected=this.otherCallRejected)}function l(h,m,k){r(function(){var D;try{D=m(k)}catch(E){return n.reject(h,E)}D===h?n.reject(h,new TypeError("Cannot resolve promise with itself")):n.resolve(h,D)})}function v(h){var m=h&&h.then;if(h&&(typeof h=="object"||typeof h=="function")&&typeof m=="function")return function(){m.apply(h,arguments)}}function w(h,m){var k=!1;function D(R){k||(k=!0,n.reject(h,R))}function E(R){k||(k=!0,n.resolve(h,R))}var L=c(function(){m(E,D)});L.status==="error"&&D(L.value)}function c(h,m){var k={};try{k.value=h(m),k.status="success"}catch(D){k.status="error",k.value=D}return k}(s.exports=b).prototype.finally=function(h){if(typeof h!="function")return this;var m=this.constructor;return this.then(function(k){return m.resolve(h()).then(function(){return k})},function(k){return m.resolve(h()).then(function(){throw k})})},b.prototype.catch=function(h){return this.then(null,h)},b.prototype.then=function(h,m){if(typeof h!="function"&&this.state===d||typeof m!="function"&&this.state===u)return this;var k=new this.constructor(i);return this.state!==_?l(k,this.state===d?h:m,this.outcome):this.queue.push(new y(k,h,m)),k},y.prototype.callFulfilled=function(h){n.resolve(this.promise,h)},y.prototype.otherCallFulfilled=function(h){l(this.promise,this.onFulfilled,h)},y.prototype.callRejected=function(h){n.reject(this.promise,h)},y.prototype.otherCallRejected=function(h){l(this.promise,this.onRejected,h)},n.resolve=function(h,m){var k=c(v,m);if(k.status==="error")return n.reject(h,k.value);var D=k.value;if(D)w(h,D);else{h.state=d,h.outcome=m;for(var E=-1,L=h.queue.length;++E<L;)h.queue[E].callFulfilled(m)}return h},n.reject=function(h,m){h.state=u,h.outcome=m;for(var k=-1,D=h.queue.length;++k<D;)h.queue[k].callRejected(m);return h},b.resolve=function(h){return h instanceof this?h:n.resolve(new this(i),h)},b.reject=function(h){var m=new this(i);return n.reject(m,h)},b.all=function(h){var m=this;if(Object.prototype.toString.call(h)!=="[object Array]")return this.reject(new TypeError("must be an array"));var k=h.length,D=!1;if(!k)return this.resolve([]);for(var E=new Array(k),L=0,R=-1,W=new this(i);++R<k;)z(h[R],R);return W;function z(M,K){m.resolve(M).then(function(p){E[K]=p,++L!==k||D||(D=!0,n.resolve(W,E))},function(p){D||(D=!0,n.reject(W,p))})}},b.race=function(h){var m=this;if(Object.prototype.toString.call(h)!=="[object Array]")return this.reject(new TypeError("must be an array"));var k=h.length,D=!1;if(!k)return this.resolve([]);for(var E=-1,L=new this(i);++E<k;)R=h[E],m.resolve(R).then(function(W){D||(D=!0,n.resolve(L,W))},function(W){D||(D=!0,n.reject(L,W))});var R;return L}},{immediate:36}],38:[function(e,s,o){"use strict";var r={};(0,e("./lib/utils/common").assign)(r,e("./lib/deflate"),e("./lib/inflate"),e("./lib/zlib/constants")),s.exports=r},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(e,s,o){"use strict";var r=e("./zlib/deflate"),i=e("./utils/common"),n=e("./utils/strings"),u=e("./zlib/messages"),d=e("./zlib/zstream"),_=Object.prototype.toString,b=0,y=-1,l=0,v=8;function w(h){if(!(this instanceof w))return new w(h);this.options=i.assign({level:y,method:v,chunkSize:16384,windowBits:15,memLevel:8,strategy:l,to:""},h||{});var m=this.options;m.raw&&0<m.windowBits?m.windowBits=-m.windowBits:m.gzip&&0<m.windowBits&&m.windowBits<16&&(m.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new d,this.strm.avail_out=0;var k=r.deflateInit2(this.strm,m.level,m.method,m.windowBits,m.memLevel,m.strategy);if(k!==b)throw new Error(u[k]);if(m.header&&r.deflateSetHeader(this.strm,m.header),m.dictionary){var D;if(D=typeof m.dictionary=="string"?n.string2buf(m.dictionary):_.call(m.dictionary)==="[object ArrayBuffer]"?new Uint8Array(m.dictionary):m.dictionary,(k=r.deflateSetDictionary(this.strm,D))!==b)throw new Error(u[k]);this._dict_set=!0}}function c(h,m){var k=new w(m);if(k.push(h,!0),k.err)throw k.msg||u[k.err];return k.result}w.prototype.push=function(h,m){var k,D,E=this.strm,L=this.options.chunkSize;if(this.ended)return!1;D=m===~~m?m:m===!0?4:0,typeof h=="string"?E.input=n.string2buf(h):_.call(h)==="[object ArrayBuffer]"?E.input=new Uint8Array(h):E.input=h,E.next_in=0,E.avail_in=E.input.length;do{if(E.avail_out===0&&(E.output=new i.Buf8(L),E.next_out=0,E.avail_out=L),(k=r.deflate(E,D))!==1&&k!==b)return this.onEnd(k),!(this.ended=!0);E.avail_out!==0&&(E.avail_in!==0||D!==4&&D!==2)||(this.options.to==="string"?this.onData(n.buf2binstring(i.shrinkBuf(E.output,E.next_out))):this.onData(i.shrinkBuf(E.output,E.next_out)))}while((0<E.avail_in||E.avail_out===0)&&k!==1);return D===4?(k=r.deflateEnd(this.strm),this.onEnd(k),this.ended=!0,k===b):D!==2||(this.onEnd(b),!(E.avail_out=0))},w.prototype.onData=function(h){this.chunks.push(h)},w.prototype.onEnd=function(h){h===b&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=h,this.msg=this.strm.msg},o.Deflate=w,o.deflate=c,o.deflateRaw=function(h,m){return(m=m||{}).raw=!0,c(h,m)},o.gzip=function(h,m){return(m=m||{}).gzip=!0,c(h,m)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(e,s,o){"use strict";var r=e("./zlib/inflate"),i=e("./utils/common"),n=e("./utils/strings"),u=e("./zlib/constants"),d=e("./zlib/messages"),_=e("./zlib/zstream"),b=e("./zlib/gzheader"),y=Object.prototype.toString;function l(w){if(!(this instanceof l))return new l(w);this.options=i.assign({chunkSize:16384,windowBits:0,to:""},w||{});var c=this.options;c.raw&&0<=c.windowBits&&c.windowBits<16&&(c.windowBits=-c.windowBits,c.windowBits===0&&(c.windowBits=-15)),!(0<=c.windowBits&&c.windowBits<16)||w&&w.windowBits||(c.windowBits+=32),15<c.windowBits&&c.windowBits<48&&(15&c.windowBits)==0&&(c.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new _,this.strm.avail_out=0;var h=r.inflateInit2(this.strm,c.windowBits);if(h!==u.Z_OK)throw new Error(d[h]);this.header=new b,r.inflateGetHeader(this.strm,this.header)}function v(w,c){var h=new l(c);if(h.push(w,!0),h.err)throw h.msg||d[h.err];return h.result}l.prototype.push=function(w,c){var h,m,k,D,E,L,R=this.strm,W=this.options.chunkSize,z=this.options.dictionary,M=!1;if(this.ended)return!1;m=c===~~c?c:c===!0?u.Z_FINISH:u.Z_NO_FLUSH,typeof w=="string"?R.input=n.binstring2buf(w):y.call(w)==="[object ArrayBuffer]"?R.input=new Uint8Array(w):R.input=w,R.next_in=0,R.avail_in=R.input.length;do{if(R.avail_out===0&&(R.output=new i.Buf8(W),R.next_out=0,R.avail_out=W),(h=r.inflate(R,u.Z_NO_FLUSH))===u.Z_NEED_DICT&&z&&(L=typeof z=="string"?n.string2buf(z):y.call(z)==="[object ArrayBuffer]"?new Uint8Array(z):z,h=r.inflateSetDictionary(this.strm,L)),h===u.Z_BUF_ERROR&&M===!0&&(h=u.Z_OK,M=!1),h!==u.Z_STREAM_END&&h!==u.Z_OK)return this.onEnd(h),!(this.ended=!0);R.next_out&&(R.avail_out!==0&&h!==u.Z_STREAM_END&&(R.avail_in!==0||m!==u.Z_FINISH&&m!==u.Z_SYNC_FLUSH)||(this.options.to==="string"?(k=n.utf8border(R.output,R.next_out),D=R.next_out-k,E=n.buf2string(R.output,k),R.next_out=D,R.avail_out=W-D,D&&i.arraySet(R.output,R.output,k,D,0),this.onData(E)):this.onData(i.shrinkBuf(R.output,R.next_out)))),R.avail_in===0&&R.avail_out===0&&(M=!0)}while((0<R.avail_in||R.avail_out===0)&&h!==u.Z_STREAM_END);return h===u.Z_STREAM_END&&(m=u.Z_FINISH),m===u.Z_FINISH?(h=r.inflateEnd(this.strm),this.onEnd(h),this.ended=!0,h===u.Z_OK):m!==u.Z_SYNC_FLUSH||(this.onEnd(u.Z_OK),!(R.avail_out=0))},l.prototype.onData=function(w){this.chunks.push(w)},l.prototype.onEnd=function(w){w===u.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=w,this.msg=this.strm.msg},o.Inflate=l,o.inflate=v,o.inflateRaw=function(w,c){return(c=c||{}).raw=!0,v(w,c)},o.ungzip=v},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(e,s,o){"use strict";var r=typeof Uint8Array!="undefined"&&typeof Uint16Array!="undefined"&&typeof Int32Array!="undefined";o.assign=function(u){for(var d=Array.prototype.slice.call(arguments,1);d.length;){var _=d.shift();if(_){if(typeof _!="object")throw new TypeError(_+"must be non-object");for(var b in _)_.hasOwnProperty(b)&&(u[b]=_[b])}}return u},o.shrinkBuf=function(u,d){return u.length===d?u:u.subarray?u.subarray(0,d):(u.length=d,u)};var i={arraySet:function(u,d,_,b,y){if(d.subarray&&u.subarray)u.set(d.subarray(_,_+b),y);else for(var l=0;l<b;l++)u[y+l]=d[_+l]},flattenChunks:function(u){var d,_,b,y,l,v;for(d=b=0,_=u.length;d<_;d++)b+=u[d].length;for(v=new Uint8Array(b),d=y=0,_=u.length;d<_;d++)l=u[d],v.set(l,y),y+=l.length;return v}},n={arraySet:function(u,d,_,b,y){for(var l=0;l<b;l++)u[y+l]=d[_+l]},flattenChunks:function(u){return[].concat.apply([],u)}};o.setTyped=function(u){u?(o.Buf8=Uint8Array,o.Buf16=Uint16Array,o.Buf32=Int32Array,o.assign(o,i)):(o.Buf8=Array,o.Buf16=Array,o.Buf32=Array,o.assign(o,n))},o.setTyped(r)},{}],42:[function(e,s,o){"use strict";var r=e("./common"),i=!0,n=!0;try{String.fromCharCode.apply(null,[0])}catch(b){i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(b){n=!1}for(var u=new r.Buf8(256),d=0;d<256;d++)u[d]=252<=d?6:248<=d?5:240<=d?4:224<=d?3:192<=d?2:1;function _(b,y){if(y<65537&&(b.subarray&&n||!b.subarray&&i))return String.fromCharCode.apply(null,r.shrinkBuf(b,y));for(var l="",v=0;v<y;v++)l+=String.fromCharCode(b[v]);return l}u[254]=u[254]=1,o.string2buf=function(b){var y,l,v,w,c,h=b.length,m=0;for(w=0;w<h;w++)(64512&(l=b.charCodeAt(w)))==55296&&w+1<h&&(64512&(v=b.charCodeAt(w+1)))==56320&&(l=65536+(l-55296<<10)+(v-56320),w++),m+=l<128?1:l<2048?2:l<65536?3:4;for(y=new r.Buf8(m),w=c=0;c<m;w++)(64512&(l=b.charCodeAt(w)))==55296&&w+1<h&&(64512&(v=b.charCodeAt(w+1)))==56320&&(l=65536+(l-55296<<10)+(v-56320),w++),l<128?y[c++]=l:(l<2048?y[c++]=192|l>>>6:(l<65536?y[c++]=224|l>>>12:(y[c++]=240|l>>>18,y[c++]=128|l>>>12&63),y[c++]=128|l>>>6&63),y[c++]=128|63&l);return y},o.buf2binstring=function(b){return _(b,b.length)},o.binstring2buf=function(b){for(var y=new r.Buf8(b.length),l=0,v=y.length;l<v;l++)y[l]=b.charCodeAt(l);return y},o.buf2string=function(b,y){var l,v,w,c,h=y||b.length,m=new Array(2*h);for(l=v=0;l<h;)if((w=b[l++])<128)m[v++]=w;else if(4<(c=u[w]))m[v++]=65533,l+=c-1;else{for(w&=c===2?31:c===3?15:7;1<c&&l<h;)w=w<<6|63&b[l++],c--;1<c?m[v++]=65533:w<65536?m[v++]=w:(w-=65536,m[v++]=55296|w>>10&1023,m[v++]=56320|1023&w)}return _(m,v)},o.utf8border=function(b,y){var l;for((y=y||b.length)>b.length&&(y=b.length),l=y-1;0<=l&&(192&b[l])==128;)l--;return l<0||l===0?y:l+u[b[l]]>y?l:y}},{"./common":41}],43:[function(e,s,o){"use strict";s.exports=function(r,i,n,u){for(var d=65535&r|0,_=r>>>16&65535|0,b=0;n!==0;){for(n-=b=2e3<n?2e3:n;_=_+(d=d+i[u++]|0)|0,--b;);d%=65521,_%=65521}return d|_<<16|0}},{}],44:[function(e,s,o){"use strict";s.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(e,s,o){"use strict";var r=function(){for(var i,n=[],u=0;u<256;u++){i=u;for(var d=0;d<8;d++)i=1&i?3988292384^i>>>1:i>>>1;n[u]=i}return n}();s.exports=function(i,n,u,d){var _=r,b=d+u;i^=-1;for(var y=d;y<b;y++)i=i>>>8^_[255&(i^n[y])];return-1^i}},{}],46:[function(e,s,o){"use strict";var r,i=e("../utils/common"),n=e("./trees"),u=e("./adler32"),d=e("./crc32"),_=e("./messages"),b=0,y=4,l=0,v=-2,w=-1,c=4,h=2,m=8,k=9,D=286,E=30,L=19,R=2*D+1,W=15,z=3,M=258,K=M+z+1,p=42,S=113,a=1,O=2,G=3,N=4;function J(t,P){return t.msg=_[P],P}function U(t){return(t<<1)-(4<t?9:0)}function Q(t){for(var P=t.length;0<=--P;)t[P]=0}function C(t){var P=t.state,I=P.pending;I>t.avail_out&&(I=t.avail_out),I!==0&&(i.arraySet(t.output,P.pending_buf,P.pending_out,I,t.next_out),t.next_out+=I,P.pending_out+=I,t.total_out+=I,t.avail_out-=I,P.pending-=I,P.pending===0&&(P.pending_out=0))}function T(t,P){n._tr_flush_block(t,0<=t.block_start?t.block_start:-1,t.strstart-t.block_start,P),t.block_start=t.strstart,C(t.strm)}function V(t,P){t.pending_buf[t.pending++]=P}function X(t,P){t.pending_buf[t.pending++]=P>>>8&255,t.pending_buf[t.pending++]=255&P}function H(t,P){var I,g,f=t.max_chain_length,A=t.strstart,B=t.prev_length,F=t.nice_match,x=t.strstart>t.w_size-K?t.strstart-(t.w_size-K):0,j=t.window,Y=t.w_mask,Z=t.prev,q=t.strstart+M,ie=j[A+B-1],re=j[A+B];t.prev_length>=t.good_match&&(f>>=2),F>t.lookahead&&(F=t.lookahead);do if(j[(I=P)+B]===re&&j[I+B-1]===ie&&j[I]===j[A]&&j[++I]===j[A+1]){A+=2,I++;do;while(j[++A]===j[++I]&&j[++A]===j[++I]&&j[++A]===j[++I]&&j[++A]===j[++I]&&j[++A]===j[++I]&&j[++A]===j[++I]&&j[++A]===j[++I]&&j[++A]===j[++I]&&A<q);if(g=M-(q-A),A=q-M,B<g){if(t.match_start=P,F<=(B=g))break;ie=j[A+B-1],re=j[A+B]}}while((P=Z[P&Y])>x&&--f!=0);return B<=t.lookahead?B:t.lookahead}function se(t){var P,I,g,f,A,B,F,x,j,Y,Z=t.w_size;do{if(f=t.window_size-t.lookahead-t.strstart,t.strstart>=Z+(Z-K)){for(i.arraySet(t.window,t.window,Z,Z,0),t.match_start-=Z,t.strstart-=Z,t.block_start-=Z,P=I=t.hash_size;g=t.head[--P],t.head[P]=Z<=g?g-Z:0,--I;);for(P=I=Z;g=t.prev[--P],t.prev[P]=Z<=g?g-Z:0,--I;);f+=Z}if(t.strm.avail_in===0)break;if(B=t.strm,F=t.window,x=t.strstart+t.lookahead,j=f,Y=void 0,Y=B.avail_in,j<Y&&(Y=j),I=Y===0?0:(B.avail_in-=Y,i.arraySet(F,B.input,B.next_in,Y,x),B.state.wrap===1?B.adler=u(B.adler,F,Y,x):B.state.wrap===2&&(B.adler=d(B.adler,F,Y,x)),B.next_in+=Y,B.total_in+=Y,Y),t.lookahead+=I,t.lookahead+t.insert>=z)for(A=t.strstart-t.insert,t.ins_h=t.window[A],t.ins_h=(t.ins_h<<t.hash_shift^t.window[A+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[A+z-1])&t.hash_mask,t.prev[A&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=A,A++,t.insert--,!(t.lookahead+t.insert<z)););}while(t.lookahead<K&&t.strm.avail_in!==0)}function le(t,P){for(var I,g;;){if(t.lookahead<K){if(se(t),t.lookahead<K&&P===b)return a;if(t.lookahead===0)break}if(I=0,t.lookahead>=z&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+z-1])&t.hash_mask,I=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),I!==0&&t.strstart-I<=t.w_size-K&&(t.match_length=H(t,I)),t.match_length>=z)if(g=n._tr_tally(t,t.strstart-t.match_start,t.match_length-z),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=z){for(t.match_length--;t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+z-1])&t.hash_mask,I=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart,--t.match_length!=0;);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else g=n._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(g&&(T(t,!1),t.strm.avail_out===0))return a}return t.insert=t.strstart<z-1?t.strstart:z-1,P===y?(T(t,!0),t.strm.avail_out===0?G:N):t.last_lit&&(T(t,!1),t.strm.avail_out===0)?a:O}function te(t,P){for(var I,g,f;;){if(t.lookahead<K){if(se(t),t.lookahead<K&&P===b)return a;if(t.lookahead===0)break}if(I=0,t.lookahead>=z&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+z-1])&t.hash_mask,I=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=z-1,I!==0&&t.prev_length<t.max_lazy_match&&t.strstart-I<=t.w_size-K&&(t.match_length=H(t,I),t.match_length<=5&&(t.strategy===1||t.match_length===z&&4096<t.strstart-t.match_start)&&(t.match_length=z-1)),t.prev_length>=z&&t.match_length<=t.prev_length){for(f=t.strstart+t.lookahead-z,g=n._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-z),t.lookahead-=t.prev_length-1,t.prev_length-=2;++t.strstart<=f&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+z-1])&t.hash_mask,I=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),--t.prev_length!=0;);if(t.match_available=0,t.match_length=z-1,t.strstart++,g&&(T(t,!1),t.strm.avail_out===0))return a}else if(t.match_available){if((g=n._tr_tally(t,0,t.window[t.strstart-1]))&&T(t,!1),t.strstart++,t.lookahead--,t.strm.avail_out===0)return a}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(g=n._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<z-1?t.strstart:z-1,P===y?(T(t,!0),t.strm.avail_out===0?G:N):t.last_lit&&(T(t,!1),t.strm.avail_out===0)?a:O}function ne(t,P,I,g,f){this.good_length=t,this.max_lazy=P,this.nice_length=I,this.max_chain=g,this.func=f}function ue(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=m,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new i.Buf16(2*R),this.dyn_dtree=new i.Buf16(2*(2*E+1)),this.bl_tree=new i.Buf16(2*(2*L+1)),Q(this.dyn_ltree),Q(this.dyn_dtree),Q(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new i.Buf16(W+1),this.heap=new i.Buf16(2*D+1),Q(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new i.Buf16(2*D+1),Q(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function ae(t){var P;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=h,(P=t.state).pending=0,P.pending_out=0,P.wrap<0&&(P.wrap=-P.wrap),P.status=P.wrap?p:S,t.adler=P.wrap===2?0:1,P.last_flush=b,n._tr_init(P),l):J(t,v)}function pe(t){var P=ae(t);return P===l&&function(I){I.window_size=2*I.w_size,Q(I.head),I.max_lazy_match=r[I.level].max_lazy,I.good_match=r[I.level].good_length,I.nice_match=r[I.level].nice_length,I.max_chain_length=r[I.level].max_chain,I.strstart=0,I.block_start=0,I.lookahead=0,I.insert=0,I.match_length=I.prev_length=z-1,I.match_available=0,I.ins_h=0}(t.state),P}function fe(t,P,I,g,f,A){if(!t)return v;var B=1;if(P===w&&(P=6),g<0?(B=0,g=-g):15<g&&(B=2,g-=16),f<1||k<f||I!==m||g<8||15<g||P<0||9<P||A<0||c<A)return J(t,v);g===8&&(g=9);var F=new ue;return(t.state=F).strm=t,F.wrap=B,F.gzhead=null,F.w_bits=g,F.w_size=1<<F.w_bits,F.w_mask=F.w_size-1,F.hash_bits=f+7,F.hash_size=1<<F.hash_bits,F.hash_mask=F.hash_size-1,F.hash_shift=~~((F.hash_bits+z-1)/z),F.window=new i.Buf8(2*F.w_size),F.head=new i.Buf16(F.hash_size),F.prev=new i.Buf16(F.w_size),F.lit_bufsize=1<<f+6,F.pending_buf_size=4*F.lit_bufsize,F.pending_buf=new i.Buf8(F.pending_buf_size),F.d_buf=1*F.lit_bufsize,F.l_buf=3*F.lit_bufsize,F.level=P,F.strategy=A,F.method=I,pe(t)}r=[new ne(0,0,0,0,function(t,P){var I=65535;for(I>t.pending_buf_size-5&&(I=t.pending_buf_size-5);;){if(t.lookahead<=1){if(se(t),t.lookahead===0&&P===b)return a;if(t.lookahead===0)break}t.strstart+=t.lookahead,t.lookahead=0;var g=t.block_start+I;if((t.strstart===0||t.strstart>=g)&&(t.lookahead=t.strstart-g,t.strstart=g,T(t,!1),t.strm.avail_out===0)||t.strstart-t.block_start>=t.w_size-K&&(T(t,!1),t.strm.avail_out===0))return a}return t.insert=0,P===y?(T(t,!0),t.strm.avail_out===0?G:N):(t.strstart>t.block_start&&(T(t,!1),t.strm.avail_out),a)}),new ne(4,4,8,4,le),new ne(4,5,16,8,le),new ne(4,6,32,32,le),new ne(4,4,16,16,te),new ne(8,16,32,32,te),new ne(8,16,128,128,te),new ne(8,32,128,256,te),new ne(32,128,258,1024,te),new ne(32,258,258,4096,te)],o.deflateInit=function(t,P){return fe(t,P,m,15,8,0)},o.deflateInit2=fe,o.deflateReset=pe,o.deflateResetKeep=ae,o.deflateSetHeader=function(t,P){return t&&t.state?t.state.wrap!==2?v:(t.state.gzhead=P,l):v},o.deflate=function(t,P){var I,g,f,A;if(!t||!t.state||5<P||P<0)return t?J(t,v):v;if(g=t.state,!t.output||!t.input&&t.avail_in!==0||g.status===666&&P!==y)return J(t,t.avail_out===0?-5:v);if(g.strm=t,I=g.last_flush,g.last_flush=P,g.status===p)if(g.wrap===2)t.adler=0,V(g,31),V(g,139),V(g,8),g.gzhead?(V(g,(g.gzhead.text?1:0)+(g.gzhead.hcrc?2:0)+(g.gzhead.extra?4:0)+(g.gzhead.name?8:0)+(g.gzhead.comment?16:0)),V(g,255&g.gzhead.time),V(g,g.gzhead.time>>8&255),V(g,g.gzhead.time>>16&255),V(g,g.gzhead.time>>24&255),V(g,g.level===9?2:2<=g.strategy||g.level<2?4:0),V(g,255&g.gzhead.os),g.gzhead.extra&&g.gzhead.extra.length&&(V(g,255&g.gzhead.extra.length),V(g,g.gzhead.extra.length>>8&255)),g.gzhead.hcrc&&(t.adler=d(t.adler,g.pending_buf,g.pending,0)),g.gzindex=0,g.status=69):(V(g,0),V(g,0),V(g,0),V(g,0),V(g,0),V(g,g.level===9?2:2<=g.strategy||g.level<2?4:0),V(g,3),g.status=S);else{var B=m+(g.w_bits-8<<4)<<8;B|=(2<=g.strategy||g.level<2?0:g.level<6?1:g.level===6?2:3)<<6,g.strstart!==0&&(B|=32),B+=31-B%31,g.status=S,X(g,B),g.strstart!==0&&(X(g,t.adler>>>16),X(g,65535&t.adler)),t.adler=1}if(g.status===69)if(g.gzhead.extra){for(f=g.pending;g.gzindex<(65535&g.gzhead.extra.length)&&(g.pending!==g.pending_buf_size||(g.gzhead.hcrc&&g.pending>f&&(t.adler=d(t.adler,g.pending_buf,g.pending-f,f)),C(t),f=g.pending,g.pending!==g.pending_buf_size));)V(g,255&g.gzhead.extra[g.gzindex]),g.gzindex++;g.gzhead.hcrc&&g.pending>f&&(t.adler=d(t.adler,g.pending_buf,g.pending-f,f)),g.gzindex===g.gzhead.extra.length&&(g.gzindex=0,g.status=73)}else g.status=73;if(g.status===73)if(g.gzhead.name){f=g.pending;do{if(g.pending===g.pending_buf_size&&(g.gzhead.hcrc&&g.pending>f&&(t.adler=d(t.adler,g.pending_buf,g.pending-f,f)),C(t),f=g.pending,g.pending===g.pending_buf_size)){A=1;break}A=g.gzindex<g.gzhead.name.length?255&g.gzhead.name.charCodeAt(g.gzindex++):0,V(g,A)}while(A!==0);g.gzhead.hcrc&&g.pending>f&&(t.adler=d(t.adler,g.pending_buf,g.pending-f,f)),A===0&&(g.gzindex=0,g.status=91)}else g.status=91;if(g.status===91)if(g.gzhead.comment){f=g.pending;do{if(g.pending===g.pending_buf_size&&(g.gzhead.hcrc&&g.pending>f&&(t.adler=d(t.adler,g.pending_buf,g.pending-f,f)),C(t),f=g.pending,g.pending===g.pending_buf_size)){A=1;break}A=g.gzindex<g.gzhead.comment.length?255&g.gzhead.comment.charCodeAt(g.gzindex++):0,V(g,A)}while(A!==0);g.gzhead.hcrc&&g.pending>f&&(t.adler=d(t.adler,g.pending_buf,g.pending-f,f)),A===0&&(g.status=103)}else g.status=103;if(g.status===103&&(g.gzhead.hcrc?(g.pending+2>g.pending_buf_size&&C(t),g.pending+2<=g.pending_buf_size&&(V(g,255&t.adler),V(g,t.adler>>8&255),t.adler=0,g.status=S)):g.status=S),g.pending!==0){if(C(t),t.avail_out===0)return g.last_flush=-1,l}else if(t.avail_in===0&&U(P)<=U(I)&&P!==y)return J(t,-5);if(g.status===666&&t.avail_in!==0)return J(t,-5);if(t.avail_in!==0||g.lookahead!==0||P!==b&&g.status!==666){var F=g.strategy===2?function(x,j){for(var Y;;){if(x.lookahead===0&&(se(x),x.lookahead===0)){if(j===b)return a;break}if(x.match_length=0,Y=n._tr_tally(x,0,x.window[x.strstart]),x.lookahead--,x.strstart++,Y&&(T(x,!1),x.strm.avail_out===0))return a}return x.insert=0,j===y?(T(x,!0),x.strm.avail_out===0?G:N):x.last_lit&&(T(x,!1),x.strm.avail_out===0)?a:O}(g,P):g.strategy===3?function(x,j){for(var Y,Z,q,ie,re=x.window;;){if(x.lookahead<=M){if(se(x),x.lookahead<=M&&j===b)return a;if(x.lookahead===0)break}if(x.match_length=0,x.lookahead>=z&&0<x.strstart&&(Z=re[q=x.strstart-1])===re[++q]&&Z===re[++q]&&Z===re[++q]){ie=x.strstart+M;do;while(Z===re[++q]&&Z===re[++q]&&Z===re[++q]&&Z===re[++q]&&Z===re[++q]&&Z===re[++q]&&Z===re[++q]&&Z===re[++q]&&q<ie);x.match_length=M-(ie-q),x.match_length>x.lookahead&&(x.match_length=x.lookahead)}if(x.match_length>=z?(Y=n._tr_tally(x,1,x.match_length-z),x.lookahead-=x.match_length,x.strstart+=x.match_length,x.match_length=0):(Y=n._tr_tally(x,0,x.window[x.strstart]),x.lookahead--,x.strstart++),Y&&(T(x,!1),x.strm.avail_out===0))return a}return x.insert=0,j===y?(T(x,!0),x.strm.avail_out===0?G:N):x.last_lit&&(T(x,!1),x.strm.avail_out===0)?a:O}(g,P):r[g.level].func(g,P);if(F!==G&&F!==N||(g.status=666),F===a||F===G)return t.avail_out===0&&(g.last_flush=-1),l;if(F===O&&(P===1?n._tr_align(g):P!==5&&(n._tr_stored_block(g,0,0,!1),P===3&&(Q(g.head),g.lookahead===0&&(g.strstart=0,g.block_start=0,g.insert=0))),C(t),t.avail_out===0))return g.last_flush=-1,l}return P!==y?l:g.wrap<=0?1:(g.wrap===2?(V(g,255&t.adler),V(g,t.adler>>8&255),V(g,t.adler>>16&255),V(g,t.adler>>24&255),V(g,255&t.total_in),V(g,t.total_in>>8&255),V(g,t.total_in>>16&255),V(g,t.total_in>>24&255)):(X(g,t.adler>>>16),X(g,65535&t.adler)),C(t),0<g.wrap&&(g.wrap=-g.wrap),g.pending!==0?l:1)},o.deflateEnd=function(t){var P;return t&&t.state?(P=t.state.status)!==p&&P!==69&&P!==73&&P!==91&&P!==103&&P!==S&&P!==666?J(t,v):(t.state=null,P===S?J(t,-3):l):v},o.deflateSetDictionary=function(t,P){var I,g,f,A,B,F,x,j,Y=P.length;if(!t||!t.state||(A=(I=t.state).wrap)===2||A===1&&I.status!==p||I.lookahead)return v;for(A===1&&(t.adler=u(t.adler,P,Y,0)),I.wrap=0,Y>=I.w_size&&(A===0&&(Q(I.head),I.strstart=0,I.block_start=0,I.insert=0),j=new i.Buf8(I.w_size),i.arraySet(j,P,Y-I.w_size,I.w_size,0),P=j,Y=I.w_size),B=t.avail_in,F=t.next_in,x=t.input,t.avail_in=Y,t.next_in=0,t.input=P,se(I);I.lookahead>=z;){for(g=I.strstart,f=I.lookahead-(z-1);I.ins_h=(I.ins_h<<I.hash_shift^I.window[g+z-1])&I.hash_mask,I.prev[g&I.w_mask]=I.head[I.ins_h],I.head[I.ins_h]=g,g++,--f;);I.strstart=g,I.lookahead=z-1,se(I)}return I.strstart+=I.lookahead,I.block_start=I.strstart,I.insert=I.lookahead,I.lookahead=0,I.match_length=I.prev_length=z-1,I.match_available=0,t.next_in=F,t.input=x,t.avail_in=B,I.wrap=A,l},o.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(e,s,o){"use strict";s.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(e,s,o){"use strict";s.exports=function(r,i){var n,u,d,_,b,y,l,v,w,c,h,m,k,D,E,L,R,W,z,M,K,p,S,a,O;n=r.state,u=r.next_in,a=r.input,d=u+(r.avail_in-5),_=r.next_out,O=r.output,b=_-(i-r.avail_out),y=_+(r.avail_out-257),l=n.dmax,v=n.wsize,w=n.whave,c=n.wnext,h=n.window,m=n.hold,k=n.bits,D=n.lencode,E=n.distcode,L=(1<<n.lenbits)-1,R=(1<<n.distbits)-1;e:do{k<15&&(m+=a[u++]<<k,k+=8,m+=a[u++]<<k,k+=8),W=D[m&L];t:for(;;){if(m>>>=z=W>>>24,k-=z,(z=W>>>16&255)===0)O[_++]=65535&W;else{if(!(16&z)){if((64&z)==0){W=D[(65535&W)+(m&(1<<z)-1)];continue t}if(32&z){n.mode=12;break e}r.msg="invalid literal/length code",n.mode=30;break e}M=65535&W,(z&=15)&&(k<z&&(m+=a[u++]<<k,k+=8),M+=m&(1<<z)-1,m>>>=z,k-=z),k<15&&(m+=a[u++]<<k,k+=8,m+=a[u++]<<k,k+=8),W=E[m&R];r:for(;;){if(m>>>=z=W>>>24,k-=z,!(16&(z=W>>>16&255))){if((64&z)==0){W=E[(65535&W)+(m&(1<<z)-1)];continue r}r.msg="invalid distance code",n.mode=30;break e}if(K=65535&W,k<(z&=15)&&(m+=a[u++]<<k,(k+=8)<z&&(m+=a[u++]<<k,k+=8)),l<(K+=m&(1<<z)-1)){r.msg="invalid distance too far back",n.mode=30;break e}if(m>>>=z,k-=z,(z=_-b)<K){if(w<(z=K-z)&&n.sane){r.msg="invalid distance too far back",n.mode=30;break e}if(S=h,(p=0)===c){if(p+=v-z,z<M){for(M-=z;O[_++]=h[p++],--z;);p=_-K,S=O}}else if(c<z){if(p+=v+c-z,(z-=c)<M){for(M-=z;O[_++]=h[p++],--z;);if(p=0,c<M){for(M-=z=c;O[_++]=h[p++],--z;);p=_-K,S=O}}}else if(p+=c-z,z<M){for(M-=z;O[_++]=h[p++],--z;);p=_-K,S=O}for(;2<M;)O[_++]=S[p++],O[_++]=S[p++],O[_++]=S[p++],M-=3;M&&(O[_++]=S[p++],1<M&&(O[_++]=S[p++]))}else{for(p=_-K;O[_++]=O[p++],O[_++]=O[p++],O[_++]=O[p++],2<(M-=3););M&&(O[_++]=O[p++],1<M&&(O[_++]=O[p++]))}break}}break}}while(u<d&&_<y);u-=M=k>>3,m&=(1<<(k-=M<<3))-1,r.next_in=u,r.next_out=_,r.avail_in=u<d?d-u+5:5-(u-d),r.avail_out=_<y?y-_+257:257-(_-y),n.hold=m,n.bits=k}},{}],49:[function(e,s,o){"use strict";var r=e("../utils/common"),i=e("./adler32"),n=e("./crc32"),u=e("./inffast"),d=e("./inftrees"),_=1,b=2,y=0,l=-2,v=1,w=852,c=592;function h(p){return(p>>>24&255)+(p>>>8&65280)+((65280&p)<<8)+((255&p)<<24)}function m(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new r.Buf16(320),this.work=new r.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function k(p){var S;return p&&p.state?(S=p.state,p.total_in=p.total_out=S.total=0,p.msg="",S.wrap&&(p.adler=1&S.wrap),S.mode=v,S.last=0,S.havedict=0,S.dmax=32768,S.head=null,S.hold=0,S.bits=0,S.lencode=S.lendyn=new r.Buf32(w),S.distcode=S.distdyn=new r.Buf32(c),S.sane=1,S.back=-1,y):l}function D(p){var S;return p&&p.state?((S=p.state).wsize=0,S.whave=0,S.wnext=0,k(p)):l}function E(p,S){var a,O;return p&&p.state?(O=p.state,S<0?(a=0,S=-S):(a=1+(S>>4),S<48&&(S&=15)),S&&(S<8||15<S)?l:(O.window!==null&&O.wbits!==S&&(O.window=null),O.wrap=a,O.wbits=S,D(p))):l}function L(p,S){var a,O;return p?(O=new m,(p.state=O).window=null,(a=E(p,S))!==y&&(p.state=null),a):l}var R,W,z=!0;function M(p){if(z){var S;for(R=new r.Buf32(512),W=new r.Buf32(32),S=0;S<144;)p.lens[S++]=8;for(;S<256;)p.lens[S++]=9;for(;S<280;)p.lens[S++]=7;for(;S<288;)p.lens[S++]=8;for(d(_,p.lens,0,288,R,0,p.work,{bits:9}),S=0;S<32;)p.lens[S++]=5;d(b,p.lens,0,32,W,0,p.work,{bits:5}),z=!1}p.lencode=R,p.lenbits=9,p.distcode=W,p.distbits=5}function K(p,S,a,O){var G,N=p.state;return N.window===null&&(N.wsize=1<<N.wbits,N.wnext=0,N.whave=0,N.window=new r.Buf8(N.wsize)),O>=N.wsize?(r.arraySet(N.window,S,a-N.wsize,N.wsize,0),N.wnext=0,N.whave=N.wsize):(O<(G=N.wsize-N.wnext)&&(G=O),r.arraySet(N.window,S,a-O,G,N.wnext),(O-=G)?(r.arraySet(N.window,S,a-O,O,0),N.wnext=O,N.whave=N.wsize):(N.wnext+=G,N.wnext===N.wsize&&(N.wnext=0),N.whave<N.wsize&&(N.whave+=G))),0}o.inflateReset=D,o.inflateReset2=E,o.inflateResetKeep=k,o.inflateInit=function(p){return L(p,15)},o.inflateInit2=L,o.inflate=function(p,S){var a,O,G,N,J,U,Q,C,T,V,X,H,se,le,te,ne,ue,ae,pe,fe,t,P,I,g,f=0,A=new r.Buf8(4),B=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!p||!p.state||!p.output||!p.input&&p.avail_in!==0)return l;(a=p.state).mode===12&&(a.mode=13),J=p.next_out,G=p.output,Q=p.avail_out,N=p.next_in,O=p.input,U=p.avail_in,C=a.hold,T=a.bits,V=U,X=Q,P=y;e:for(;;)switch(a.mode){case v:if(a.wrap===0){a.mode=13;break}for(;T<16;){if(U===0)break e;U--,C+=O[N++]<<T,T+=8}if(2&a.wrap&&C===35615){A[a.check=0]=255&C,A[1]=C>>>8&255,a.check=n(a.check,A,2,0),T=C=0,a.mode=2;break}if(a.flags=0,a.head&&(a.head.done=!1),!(1&a.wrap)||(((255&C)<<8)+(C>>8))%31){p.msg="incorrect header check",a.mode=30;break}if((15&C)!=8){p.msg="unknown compression method",a.mode=30;break}if(T-=4,t=8+(15&(C>>>=4)),a.wbits===0)a.wbits=t;else if(t>a.wbits){p.msg="invalid window size",a.mode=30;break}a.dmax=1<<t,p.adler=a.check=1,a.mode=512&C?10:12,T=C=0;break;case 2:for(;T<16;){if(U===0)break e;U--,C+=O[N++]<<T,T+=8}if(a.flags=C,(255&a.flags)!=8){p.msg="unknown compression method",a.mode=30;break}if(57344&a.flags){p.msg="unknown header flags set",a.mode=30;break}a.head&&(a.head.text=C>>8&1),512&a.flags&&(A[0]=255&C,A[1]=C>>>8&255,a.check=n(a.check,A,2,0)),T=C=0,a.mode=3;case 3:for(;T<32;){if(U===0)break e;U--,C+=O[N++]<<T,T+=8}a.head&&(a.head.time=C),512&a.flags&&(A[0]=255&C,A[1]=C>>>8&255,A[2]=C>>>16&255,A[3]=C>>>24&255,a.check=n(a.check,A,4,0)),T=C=0,a.mode=4;case 4:for(;T<16;){if(U===0)break e;U--,C+=O[N++]<<T,T+=8}a.head&&(a.head.xflags=255&C,a.head.os=C>>8),512&a.flags&&(A[0]=255&C,A[1]=C>>>8&255,a.check=n(a.check,A,2,0)),T=C=0,a.mode=5;case 5:if(1024&a.flags){for(;T<16;){if(U===0)break e;U--,C+=O[N++]<<T,T+=8}a.length=C,a.head&&(a.head.extra_len=C),512&a.flags&&(A[0]=255&C,A[1]=C>>>8&255,a.check=n(a.check,A,2,0)),T=C=0}else a.head&&(a.head.extra=null);a.mode=6;case 6:if(1024&a.flags&&(U<(H=a.length)&&(H=U),H&&(a.head&&(t=a.head.extra_len-a.length,a.head.extra||(a.head.extra=new Array(a.head.extra_len)),r.arraySet(a.head.extra,O,N,H,t)),512&a.flags&&(a.check=n(a.check,O,H,N)),U-=H,N+=H,a.length-=H),a.length))break e;a.length=0,a.mode=7;case 7:if(2048&a.flags){if(U===0)break e;for(H=0;t=O[N+H++],a.head&&t&&a.length<65536&&(a.head.name+=String.fromCharCode(t)),t&&H<U;);if(512&a.flags&&(a.check=n(a.check,O,H,N)),U-=H,N+=H,t)break e}else a.head&&(a.head.name=null);a.length=0,a.mode=8;case 8:if(4096&a.flags){if(U===0)break e;for(H=0;t=O[N+H++],a.head&&t&&a.length<65536&&(a.head.comment+=String.fromCharCode(t)),t&&H<U;);if(512&a.flags&&(a.check=n(a.check,O,H,N)),U-=H,N+=H,t)break e}else a.head&&(a.head.comment=null);a.mode=9;case 9:if(512&a.flags){for(;T<16;){if(U===0)break e;U--,C+=O[N++]<<T,T+=8}if(C!==(65535&a.check)){p.msg="header crc mismatch",a.mode=30;break}T=C=0}a.head&&(a.head.hcrc=a.flags>>9&1,a.head.done=!0),p.adler=a.check=0,a.mode=12;break;case 10:for(;T<32;){if(U===0)break e;U--,C+=O[N++]<<T,T+=8}p.adler=a.check=h(C),T=C=0,a.mode=11;case 11:if(a.havedict===0)return p.next_out=J,p.avail_out=Q,p.next_in=N,p.avail_in=U,a.hold=C,a.bits=T,2;p.adler=a.check=1,a.mode=12;case 12:if(S===5||S===6)break e;case 13:if(a.last){C>>>=7&T,T-=7&T,a.mode=27;break}for(;T<3;){if(U===0)break e;U--,C+=O[N++]<<T,T+=8}switch(a.last=1&C,T-=1,3&(C>>>=1)){case 0:a.mode=14;break;case 1:if(M(a),a.mode=20,S!==6)break;C>>>=2,T-=2;break e;case 2:a.mode=17;break;case 3:p.msg="invalid block type",a.mode=30}C>>>=2,T-=2;break;case 14:for(C>>>=7&T,T-=7&T;T<32;){if(U===0)break e;U--,C+=O[N++]<<T,T+=8}if((65535&C)!=(C>>>16^65535)){p.msg="invalid stored block lengths",a.mode=30;break}if(a.length=65535&C,T=C=0,a.mode=15,S===6)break e;case 15:a.mode=16;case 16:if(H=a.length){if(U<H&&(H=U),Q<H&&(H=Q),H===0)break e;r.arraySet(G,O,N,H,J),U-=H,N+=H,Q-=H,J+=H,a.length-=H;break}a.mode=12;break;case 17:for(;T<14;){if(U===0)break e;U--,C+=O[N++]<<T,T+=8}if(a.nlen=257+(31&C),C>>>=5,T-=5,a.ndist=1+(31&C),C>>>=5,T-=5,a.ncode=4+(15&C),C>>>=4,T-=4,286<a.nlen||30<a.ndist){p.msg="too many length or distance symbols",a.mode=30;break}a.have=0,a.mode=18;case 18:for(;a.have<a.ncode;){for(;T<3;){if(U===0)break e;U--,C+=O[N++]<<T,T+=8}a.lens[B[a.have++]]=7&C,C>>>=3,T-=3}for(;a.have<19;)a.lens[B[a.have++]]=0;if(a.lencode=a.lendyn,a.lenbits=7,I={bits:a.lenbits},P=d(0,a.lens,0,19,a.lencode,0,a.work,I),a.lenbits=I.bits,P){p.msg="invalid code lengths set",a.mode=30;break}a.have=0,a.mode=19;case 19:for(;a.have<a.nlen+a.ndist;){for(;ne=(f=a.lencode[C&(1<<a.lenbits)-1])>>>16&255,ue=65535&f,!((te=f>>>24)<=T);){if(U===0)break e;U--,C+=O[N++]<<T,T+=8}if(ue<16)C>>>=te,T-=te,a.lens[a.have++]=ue;else{if(ue===16){for(g=te+2;T<g;){if(U===0)break e;U--,C+=O[N++]<<T,T+=8}if(C>>>=te,T-=te,a.have===0){p.msg="invalid bit length repeat",a.mode=30;break}t=a.lens[a.have-1],H=3+(3&C),C>>>=2,T-=2}else if(ue===17){for(g=te+3;T<g;){if(U===0)break e;U--,C+=O[N++]<<T,T+=8}T-=te,t=0,H=3+(7&(C>>>=te)),C>>>=3,T-=3}else{for(g=te+7;T<g;){if(U===0)break e;U--,C+=O[N++]<<T,T+=8}T-=te,t=0,H=11+(127&(C>>>=te)),C>>>=7,T-=7}if(a.have+H>a.nlen+a.ndist){p.msg="invalid bit length repeat",a.mode=30;break}for(;H--;)a.lens[a.have++]=t}}if(a.mode===30)break;if(a.lens[256]===0){p.msg="invalid code -- missing end-of-block",a.mode=30;break}if(a.lenbits=9,I={bits:a.lenbits},P=d(_,a.lens,0,a.nlen,a.lencode,0,a.work,I),a.lenbits=I.bits,P){p.msg="invalid literal/lengths set",a.mode=30;break}if(a.distbits=6,a.distcode=a.distdyn,I={bits:a.distbits},P=d(b,a.lens,a.nlen,a.ndist,a.distcode,0,a.work,I),a.distbits=I.bits,P){p.msg="invalid distances set",a.mode=30;break}if(a.mode=20,S===6)break e;case 20:a.mode=21;case 21:if(6<=U&&258<=Q){p.next_out=J,p.avail_out=Q,p.next_in=N,p.avail_in=U,a.hold=C,a.bits=T,u(p,X),J=p.next_out,G=p.output,Q=p.avail_out,N=p.next_in,O=p.input,U=p.avail_in,C=a.hold,T=a.bits,a.mode===12&&(a.back=-1);break}for(a.back=0;ne=(f=a.lencode[C&(1<<a.lenbits)-1])>>>16&255,ue=65535&f,!((te=f>>>24)<=T);){if(U===0)break e;U--,C+=O[N++]<<T,T+=8}if(ne&&(240&ne)==0){for(ae=te,pe=ne,fe=ue;ne=(f=a.lencode[fe+((C&(1<<ae+pe)-1)>>ae)])>>>16&255,ue=65535&f,!(ae+(te=f>>>24)<=T);){if(U===0)break e;U--,C+=O[N++]<<T,T+=8}C>>>=ae,T-=ae,a.back+=ae}if(C>>>=te,T-=te,a.back+=te,a.length=ue,ne===0){a.mode=26;break}if(32&ne){a.back=-1,a.mode=12;break}if(64&ne){p.msg="invalid literal/length code",a.mode=30;break}a.extra=15&ne,a.mode=22;case 22:if(a.extra){for(g=a.extra;T<g;){if(U===0)break e;U--,C+=O[N++]<<T,T+=8}a.length+=C&(1<<a.extra)-1,C>>>=a.extra,T-=a.extra,a.back+=a.extra}a.was=a.length,a.mode=23;case 23:for(;ne=(f=a.distcode[C&(1<<a.distbits)-1])>>>16&255,ue=65535&f,!((te=f>>>24)<=T);){if(U===0)break e;U--,C+=O[N++]<<T,T+=8}if((240&ne)==0){for(ae=te,pe=ne,fe=ue;ne=(f=a.distcode[fe+((C&(1<<ae+pe)-1)>>ae)])>>>16&255,ue=65535&f,!(ae+(te=f>>>24)<=T);){if(U===0)break e;U--,C+=O[N++]<<T,T+=8}C>>>=ae,T-=ae,a.back+=ae}if(C>>>=te,T-=te,a.back+=te,64&ne){p.msg="invalid distance code",a.mode=30;break}a.offset=ue,a.extra=15&ne,a.mode=24;case 24:if(a.extra){for(g=a.extra;T<g;){if(U===0)break e;U--,C+=O[N++]<<T,T+=8}a.offset+=C&(1<<a.extra)-1,C>>>=a.extra,T-=a.extra,a.back+=a.extra}if(a.offset>a.dmax){p.msg="invalid distance too far back",a.mode=30;break}a.mode=25;case 25:if(Q===0)break e;if(H=X-Q,a.offset>H){if((H=a.offset-H)>a.whave&&a.sane){p.msg="invalid distance too far back",a.mode=30;break}se=H>a.wnext?(H-=a.wnext,a.wsize-H):a.wnext-H,H>a.length&&(H=a.length),le=a.window}else le=G,se=J-a.offset,H=a.length;for(Q<H&&(H=Q),Q-=H,a.length-=H;G[J++]=le[se++],--H;);a.length===0&&(a.mode=21);break;case 26:if(Q===0)break e;G[J++]=a.length,Q--,a.mode=21;break;case 27:if(a.wrap){for(;T<32;){if(U===0)break e;U--,C|=O[N++]<<T,T+=8}if(X-=Q,p.total_out+=X,a.total+=X,X&&(p.adler=a.check=a.flags?n(a.check,G,X,J-X):i(a.check,G,X,J-X)),X=Q,(a.flags?C:h(C))!==a.check){p.msg="incorrect data check",a.mode=30;break}T=C=0}a.mode=28;case 28:if(a.wrap&&a.flags){for(;T<32;){if(U===0)break e;U--,C+=O[N++]<<T,T+=8}if(C!==(4294967295&a.total)){p.msg="incorrect length check",a.mode=30;break}T=C=0}a.mode=29;case 29:P=1;break e;case 30:P=-3;break e;case 31:return-4;case 32:default:return l}return p.next_out=J,p.avail_out=Q,p.next_in=N,p.avail_in=U,a.hold=C,a.bits=T,(a.wsize||X!==p.avail_out&&a.mode<30&&(a.mode<27||S!==4))&&K(p,p.output,p.next_out,X-p.avail_out)?(a.mode=31,-4):(V-=p.avail_in,X-=p.avail_out,p.total_in+=V,p.total_out+=X,a.total+=X,a.wrap&&X&&(p.adler=a.check=a.flags?n(a.check,G,X,p.next_out-X):i(a.check,G,X,p.next_out-X)),p.data_type=a.bits+(a.last?64:0)+(a.mode===12?128:0)+(a.mode===20||a.mode===15?256:0),(V==0&&X===0||S===4)&&P===y&&(P=-5),P)},o.inflateEnd=function(p){if(!p||!p.state)return l;var S=p.state;return S.window&&(S.window=null),p.state=null,y},o.inflateGetHeader=function(p,S){var a;return p&&p.state?(2&(a=p.state).wrap)==0?l:((a.head=S).done=!1,y):l},o.inflateSetDictionary=function(p,S){var a,O=S.length;return p&&p.state?(a=p.state).wrap!==0&&a.mode!==11?l:a.mode===11&&i(1,S,O,0)!==a.check?-3:K(p,S,O,O)?(a.mode=31,-4):(a.havedict=1,y):l},o.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(e,s,o){"use strict";var r=e("../utils/common"),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],n=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],u=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],d=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];s.exports=function(_,b,y,l,v,w,c,h){var m,k,D,E,L,R,W,z,M,K=h.bits,p=0,S=0,a=0,O=0,G=0,N=0,J=0,U=0,Q=0,C=0,T=null,V=0,X=new r.Buf16(16),H=new r.Buf16(16),se=null,le=0;for(p=0;p<=15;p++)X[p]=0;for(S=0;S<l;S++)X[b[y+S]]++;for(G=K,O=15;1<=O&&X[O]===0;O--);if(O<G&&(G=O),O===0)return v[w++]=20971520,v[w++]=20971520,h.bits=1,0;for(a=1;a<O&&X[a]===0;a++);for(G<a&&(G=a),p=U=1;p<=15;p++)if(U<<=1,(U-=X[p])<0)return-1;if(0<U&&(_===0||O!==1))return-1;for(H[1]=0,p=1;p<15;p++)H[p+1]=H[p]+X[p];for(S=0;S<l;S++)b[y+S]!==0&&(c[H[b[y+S]]++]=S);if(R=_===0?(T=se=c,19):_===1?(T=i,V-=257,se=n,le-=257,256):(T=u,se=d,-1),p=a,L=w,J=S=C=0,D=-1,E=(Q=1<<(N=G))-1,_===1&&852<Q||_===2&&592<Q)return 1;for(;;){for(W=p-J,M=c[S]<R?(z=0,c[S]):c[S]>R?(z=se[le+c[S]],T[V+c[S]]):(z=96,0),m=1<<p-J,a=k=1<<N;v[L+(C>>J)+(k-=m)]=W<<24|z<<16|M|0,k!==0;);for(m=1<<p-1;C&m;)m>>=1;if(m!==0?(C&=m-1,C+=m):C=0,S++,--X[p]==0){if(p===O)break;p=b[y+c[S]]}if(G<p&&(C&E)!==D){for(J===0&&(J=G),L+=a,U=1<<(N=p-J);N+J<O&&!((U-=X[N+J])<=0);)N++,U<<=1;if(Q+=1<<N,_===1&&852<Q||_===2&&592<Q)return 1;v[D=C&E]=G<<24|N<<16|L-w|0}}return C!==0&&(v[L+C]=p-J<<24|64<<16|0),h.bits=G,0}},{"../utils/common":41}],51:[function(e,s,o){"use strict";s.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(e,s,o){"use strict";var r=e("../utils/common"),i=0,n=1;function u(f){for(var A=f.length;0<=--A;)f[A]=0}var d=0,_=29,b=256,y=b+1+_,l=30,v=19,w=2*y+1,c=15,h=16,m=7,k=256,D=16,E=17,L=18,R=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],W=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],z=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],M=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],K=new Array(2*(y+2));u(K);var p=new Array(2*l);u(p);var S=new Array(512);u(S);var a=new Array(256);u(a);var O=new Array(_);u(O);var G,N,J,U=new Array(l);function Q(f,A,B,F,x){this.static_tree=f,this.extra_bits=A,this.extra_base=B,this.elems=F,this.max_length=x,this.has_stree=f&&f.length}function C(f,A){this.dyn_tree=f,this.max_code=0,this.stat_desc=A}function T(f){return f<256?S[f]:S[256+(f>>>7)]}function V(f,A){f.pending_buf[f.pending++]=255&A,f.pending_buf[f.pending++]=A>>>8&255}function X(f,A,B){f.bi_valid>h-B?(f.bi_buf|=A<<f.bi_valid&65535,V(f,f.bi_buf),f.bi_buf=A>>h-f.bi_valid,f.bi_valid+=B-h):(f.bi_buf|=A<<f.bi_valid&65535,f.bi_valid+=B)}function H(f,A,B){X(f,B[2*A],B[2*A+1])}function se(f,A){for(var B=0;B|=1&f,f>>>=1,B<<=1,0<--A;);return B>>>1}function le(f,A,B){var F,x,j=new Array(c+1),Y=0;for(F=1;F<=c;F++)j[F]=Y=Y+B[F-1]<<1;for(x=0;x<=A;x++){var Z=f[2*x+1];Z!==0&&(f[2*x]=se(j[Z]++,Z))}}function te(f){var A;for(A=0;A<y;A++)f.dyn_ltree[2*A]=0;for(A=0;A<l;A++)f.dyn_dtree[2*A]=0;for(A=0;A<v;A++)f.bl_tree[2*A]=0;f.dyn_ltree[2*k]=1,f.opt_len=f.static_len=0,f.last_lit=f.matches=0}function ne(f){8<f.bi_valid?V(f,f.bi_buf):0<f.bi_valid&&(f.pending_buf[f.pending++]=f.bi_buf),f.bi_buf=0,f.bi_valid=0}function ue(f,A,B,F){var x=2*A,j=2*B;return f[x]<f[j]||f[x]===f[j]&&F[A]<=F[B]}function ae(f,A,B){for(var F=f.heap[B],x=B<<1;x<=f.heap_len&&(x<f.heap_len&&ue(A,f.heap[x+1],f.heap[x],f.depth)&&x++,!ue(A,F,f.heap[x],f.depth));)f.heap[B]=f.heap[x],B=x,x<<=1;f.heap[B]=F}function pe(f,A,B){var F,x,j,Y,Z=0;if(f.last_lit!==0)for(;F=f.pending_buf[f.d_buf+2*Z]<<8|f.pending_buf[f.d_buf+2*Z+1],x=f.pending_buf[f.l_buf+Z],Z++,F===0?H(f,x,A):(H(f,(j=a[x])+b+1,A),(Y=R[j])!==0&&X(f,x-=O[j],Y),H(f,j=T(--F),B),(Y=W[j])!==0&&X(f,F-=U[j],Y)),Z<f.last_lit;);H(f,k,A)}function fe(f,A){var B,F,x,j=A.dyn_tree,Y=A.stat_desc.static_tree,Z=A.stat_desc.has_stree,q=A.stat_desc.elems,ie=-1;for(f.heap_len=0,f.heap_max=w,B=0;B<q;B++)j[2*B]!==0?(f.heap[++f.heap_len]=ie=B,f.depth[B]=0):j[2*B+1]=0;for(;f.heap_len<2;)j[2*(x=f.heap[++f.heap_len]=ie<2?++ie:0)]=1,f.depth[x]=0,f.opt_len--,Z&&(f.static_len-=Y[2*x+1]);for(A.max_code=ie,B=f.heap_len>>1;1<=B;B--)ae(f,j,B);for(x=q;B=f.heap[1],f.heap[1]=f.heap[f.heap_len--],ae(f,j,1),F=f.heap[1],f.heap[--f.heap_max]=B,f.heap[--f.heap_max]=F,j[2*x]=j[2*B]+j[2*F],f.depth[x]=(f.depth[B]>=f.depth[F]?f.depth[B]:f.depth[F])+1,j[2*B+1]=j[2*F+1]=x,f.heap[1]=x++,ae(f,j,1),2<=f.heap_len;);f.heap[--f.heap_max]=f.heap[1],function(re,de){var Ee,me,xe,oe,Re,We,ge=de.dyn_tree,lt=de.max_code,hr=de.stat_desc.static_tree,fr=de.stat_desc.has_stree,pr=de.stat_desc.extra_bits,ct=de.stat_desc.extra_base,Se=de.stat_desc.max_length,Pe=0;for(oe=0;oe<=c;oe++)re.bl_count[oe]=0;for(ge[2*re.heap[re.heap_max]+1]=0,Ee=re.heap_max+1;Ee<w;Ee++)Se<(oe=ge[2*ge[2*(me=re.heap[Ee])+1]+1]+1)&&(oe=Se,Pe++),ge[2*me+1]=oe,lt<me||(re.bl_count[oe]++,Re=0,ct<=me&&(Re=pr[me-ct]),We=ge[2*me],re.opt_len+=We*(oe+Re),fr&&(re.static_len+=We*(hr[2*me+1]+Re)));if(Pe!==0){do{for(oe=Se-1;re.bl_count[oe]===0;)oe--;re.bl_count[oe]--,re.bl_count[oe+1]+=2,re.bl_count[Se]--,Pe-=2}while(0<Pe);for(oe=Se;oe!==0;oe--)for(me=re.bl_count[oe];me!==0;)lt<(xe=re.heap[--Ee])||(ge[2*xe+1]!==oe&&(re.opt_len+=(oe-ge[2*xe+1])*ge[2*xe],ge[2*xe+1]=oe),me--)}}(f,A),le(j,ie,f.bl_count)}function t(f,A,B){var F,x,j=-1,Y=A[1],Z=0,q=7,ie=4;for(Y===0&&(q=138,ie=3),A[2*(B+1)+1]=65535,F=0;F<=B;F++)x=Y,Y=A[2*(F+1)+1],++Z<q&&x===Y||(Z<ie?f.bl_tree[2*x]+=Z:x!==0?(x!==j&&f.bl_tree[2*x]++,f.bl_tree[2*D]++):Z<=10?f.bl_tree[2*E]++:f.bl_tree[2*L]++,j=x,ie=(Z=0)===Y?(q=138,3):x===Y?(q=6,3):(q=7,4))}function P(f,A,B){var F,x,j=-1,Y=A[1],Z=0,q=7,ie=4;for(Y===0&&(q=138,ie=3),F=0;F<=B;F++)if(x=Y,Y=A[2*(F+1)+1],!(++Z<q&&x===Y)){if(Z<ie)for(;H(f,x,f.bl_tree),--Z!=0;);else x!==0?(x!==j&&(H(f,x,f.bl_tree),Z--),H(f,D,f.bl_tree),X(f,Z-3,2)):Z<=10?(H(f,E,f.bl_tree),X(f,Z-3,3)):(H(f,L,f.bl_tree),X(f,Z-11,7));j=x,ie=(Z=0)===Y?(q=138,3):x===Y?(q=6,3):(q=7,4)}}u(U);var I=!1;function g(f,A,B,F){X(f,(d<<1)+(F?1:0),3),function(x,j,Y,Z){ne(x),Z&&(V(x,Y),V(x,~Y)),r.arraySet(x.pending_buf,x.window,j,Y,x.pending),x.pending+=Y}(f,A,B,!0)}o._tr_init=function(f){I||(function(){var A,B,F,x,j,Y=new Array(c+1);for(x=F=0;x<_-1;x++)for(O[x]=F,A=0;A<1<<R[x];A++)a[F++]=x;for(a[F-1]=x,x=j=0;x<16;x++)for(U[x]=j,A=0;A<1<<W[x];A++)S[j++]=x;for(j>>=7;x<l;x++)for(U[x]=j<<7,A=0;A<1<<W[x]-7;A++)S[256+j++]=x;for(B=0;B<=c;B++)Y[B]=0;for(A=0;A<=143;)K[2*A+1]=8,A++,Y[8]++;for(;A<=255;)K[2*A+1]=9,A++,Y[9]++;for(;A<=279;)K[2*A+1]=7,A++,Y[7]++;for(;A<=287;)K[2*A+1]=8,A++,Y[8]++;for(le(K,y+1,Y),A=0;A<l;A++)p[2*A+1]=5,p[2*A]=se(A,5);G=new Q(K,R,b+1,y,c),N=new Q(p,W,0,l,c),J=new Q(new Array(0),z,0,v,m)}(),I=!0),f.l_desc=new C(f.dyn_ltree,G),f.d_desc=new C(f.dyn_dtree,N),f.bl_desc=new C(f.bl_tree,J),f.bi_buf=0,f.bi_valid=0,te(f)},o._tr_stored_block=g,o._tr_flush_block=function(f,A,B,F){var x,j,Y=0;0<f.level?(f.strm.data_type===2&&(f.strm.data_type=function(Z){var q,ie=4093624447;for(q=0;q<=31;q++,ie>>>=1)if(1&ie&&Z.dyn_ltree[2*q]!==0)return i;if(Z.dyn_ltree[18]!==0||Z.dyn_ltree[20]!==0||Z.dyn_ltree[26]!==0)return n;for(q=32;q<b;q++)if(Z.dyn_ltree[2*q]!==0)return n;return i}(f)),fe(f,f.l_desc),fe(f,f.d_desc),Y=function(Z){var q;for(t(Z,Z.dyn_ltree,Z.l_desc.max_code),t(Z,Z.dyn_dtree,Z.d_desc.max_code),fe(Z,Z.bl_desc),q=v-1;3<=q&&Z.bl_tree[2*M[q]+1]===0;q--);return Z.opt_len+=3*(q+1)+5+5+4,q}(f),x=f.opt_len+3+7>>>3,(j=f.static_len+3+7>>>3)<=x&&(x=j)):x=j=B+5,B+4<=x&&A!==-1?g(f,A,B,F):f.strategy===4||j===x?(X(f,2+(F?1:0),3),pe(f,K,p)):(X(f,4+(F?1:0),3),function(Z,q,ie,re){var de;for(X(Z,q-257,5),X(Z,ie-1,5),X(Z,re-4,4),de=0;de<re;de++)X(Z,Z.bl_tree[2*M[de]+1],3);P(Z,Z.dyn_ltree,q-1),P(Z,Z.dyn_dtree,ie-1)}(f,f.l_desc.max_code+1,f.d_desc.max_code+1,Y+1),pe(f,f.dyn_ltree,f.dyn_dtree)),te(f),F&&ne(f)},o._tr_tally=function(f,A,B){return f.pending_buf[f.d_buf+2*f.last_lit]=A>>>8&255,f.pending_buf[f.d_buf+2*f.last_lit+1]=255&A,f.pending_buf[f.l_buf+f.last_lit]=255&B,f.last_lit++,A===0?f.dyn_ltree[2*B]++:(f.matches++,A--,f.dyn_ltree[2*(a[B]+b+1)]++,f.dyn_dtree[2*T(A)]++),f.last_lit===f.lit_bufsize-1},o._tr_align=function(f){X(f,2,3),H(f,k,K),function(A){A.bi_valid===16?(V(A,A.bi_buf),A.bi_buf=0,A.bi_valid=0):8<=A.bi_valid&&(A.pending_buf[A.pending++]=255&A.bi_buf,A.bi_buf>>=8,A.bi_valid-=8)}(f)}},{"../utils/common":41}],53:[function(e,s,o){"use strict";s.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(e,s,o){"use strict";s.exports=typeof setImmediate=="function"?setImmediate:function(){var r=[].slice.apply(arguments);r.splice(1,0,0),setTimeout.apply(null,r)}},{}]},{},[10])(10)})});var gt=_e((He,Xe)=>{(function(e,s){typeof define=="function"&&define.amd?define([],s):typeof He!="undefined"?s():(s(),e.FileSaver={})})(He,function(){"use strict";function e(d,_){return typeof _=="undefined"?_={autoBom:!1}:typeof _!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),_={autoBom:!_}),_.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(d.type)?new Blob(["\uFEFF",d],{type:d.type}):d}function s(d,_,b){var y=new XMLHttpRequest;y.open("GET",d),y.responseType="blob",y.onload=function(){u(y.response,_,b)},y.onerror=function(){console.error("could not download file")},y.send()}function o(d){var _=new XMLHttpRequest;_.open("HEAD",d,!1);try{_.send()}catch(b){}return 200<=_.status&&299>=_.status}function r(d){try{d.dispatchEvent(new MouseEvent("click"))}catch(b){var _=document.createEvent("MouseEvents");_.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),d.dispatchEvent(_)}}var i=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof global=="object"&&global.global===global?global:void 0,n=i.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),u=i.saveAs||(typeof window!="object"||window!==i?function(){}:"download"in HTMLAnchorElement.prototype&&!n?function(d,_,b){var y=i.URL||i.webkitURL,l=document.createElement("a");_=_||d.name||"download",l.download=_,l.rel="noopener",typeof d=="string"?(l.href=d,l.origin===location.origin?r(l):o(l.href)?s(d,_,b):r(l,l.target="_blank")):(l.href=y.createObjectURL(d),setTimeout(function(){y.revokeObjectURL(l.href)},4e4),setTimeout(function(){r(l)},0))}:"msSaveOrOpenBlob"in navigator?function(d,_,b){if(_=_||d.name||"download",typeof d!="string")navigator.msSaveOrOpenBlob(e(d,b),_);else if(o(d))s(d,_,b);else{var y=document.createElement("a");y.href=d,y.target="_blank",setTimeout(function(){r(y)})}}:function(d,_,b,y){if(y=y||open("","_blank"),y&&(y.document.title=y.document.body.innerText="downloading..."),typeof d=="string")return s(d,_,b);var l=d.type==="application/octet-stream",v=/constructor/i.test(i.HTMLElement)||i.safari,w=/CriOS\/[\d]+/.test(navigator.userAgent);if((w||l&&v||n)&&typeof FileReader!="undefined"){var c=new FileReader;c.onloadend=function(){var k=c.result;k=w?k:k.replace(/^data:[^;]*;/,"data:attachment/file;"),y?y.location.href=k:location=k,y=null},c.readAsDataURL(d)}else{var h=i.URL||i.webkitURL,m=h.createObjectURL(d);y?y.location=m:location.href=m,y=null,setTimeout(function(){h.revokeObjectURL(m)},4e4)}});i.saveAs=u.saveAs=u,typeof Xe!="undefined"&&(Xe.exports=u)})});var vt=_e((qe,_t)=>{(function(e,s){"use strict";typeof define=="function"&&define.amd?define([],s):typeof qe=="object"?_t.exports=s():e.Timer=s()})(qe,function(){"use strict";var e={tick:1,onstart:null,ontick:null,onpause:null,onstop:null,onend:null},s=function(n){if(!(this instanceof s))return new s(n);this._={id:+new Date,options:{},duration:0,status:"initialized",start:0,measures:[]};for(var u in e)this._.options[u]=e[u];this.options(n)};s.prototype.start=function(n){return!+n&&!this._.duration?this:(n&&(n*=1e3),this._.timeout&&this._.status==="started"?this:(this._.duration=n||this._.duration,this._.timeout=setTimeout(o.bind(this),this._.duration),typeof this._.options.ontick=="function"&&(this._.interval=setInterval(function(){r.call(this,"ontick",this.getDuration())}.bind(this),+this._.options.tick*1e3)),this._.start=+new Date,this._.status="started",r.call(this,"onstart",this.getDuration()),this))},s.prototype.pause=function(){return this._.status!=="started"?this:(this._.duration-=+new Date-this._.start,i.call(this,!1),this._.status="paused",r.call(this,"onpause"),this)},s.prototype.stop=function(){return/started|paused/.test(this._.status)?(i.call(this,!0),this._.status="stopped",r.call(this,"onstop"),this):this},s.prototype.getDuration=function(){return this._.status==="started"?this._.duration-(+new Date-this._.start):this._.status==="paused"?this._.duration:0},s.prototype.getStatus=function(){return this._.status},s.prototype.options=function(n,u){if(n&&u&&(this._.options[n]=u),!u&&typeof n=="object")for(var d in n)this._.options.hasOwnProperty(d)&&(this._.options[d]=n[d]);return this},s.prototype.on=function(n,u){return typeof n!="string"||typeof u!="function"?this:(/^on/.test(n)||(n="on"+n),this._.options.hasOwnProperty(n)&&(this._.options[n]=u),this)},s.prototype.off=function(n){return typeof n!="string"?this:(n=n.toLowerCase(),n==="all"?(this._.options=e,this):(/^on/.test(n)||(n="on"+n),this._.options.hasOwnProperty(n)&&(this._.options[n]=e[n]),this))},s.prototype.measureStart=function(n){return this._.measures[n||""]=+new Date,this},s.prototype.measureStop=function(n){return+new Date-this._.measures[n||""]};function o(){i.call(this),this._.status="stopped",r.call(this,"onend")}function r(n){var u=this._.options[n],d=[].slice.call(arguments,1);typeof u=="function"&&u.apply(this,d)}function i(n){clearTimeout(this._.timeout),clearInterval(this._.interval),n===!0&&(this._.duration=0)}return s})});var kt=_e((hn,Qe)=>{"use strict";var kr=(e,s)=>Math.floor(Math.random()*(s-e+1)+e),bt=()=>{let e=new Error("Delay aborted");return e.name="AbortError",e},yt=({clearTimeout:e,setTimeout:s,willResolve:o})=>(r,{value:i,signal:n}={})=>{if(n&&n.aborted)return Promise.reject(bt());let u,d,_,b=e||clearTimeout,y=()=>{b(u),_(bt())},l=()=>{n&&n.removeEventListener("abort",y)},v=new Promise((w,c)=>{d=()=>{l(),o?w(i):c(i)},_=c,u=(s||setTimeout)(d,r)});return n&&n.addEventListener("abort",y,{once:!0}),v.clear=()=>{b(u),u=null,d()},v},wt=e=>{let s=yt({...e,willResolve:!0});return s.reject=yt({...e,willResolve:!1}),s.range=(o,r,i)=>s(kr(o,r),i),s},Ve=wt();Ve.createWithTimers=wt;Qe.exports=Ve;Qe.exports.default=Ve});var Et=_e((fn,At)=>{function he(e,s){typeof s=="boolean"&&(s={forever:s}),this._originalTimeouts=JSON.parse(JSON.stringify(e)),this._timeouts=e,this._options=s||{},this._maxRetryTime=s&&s.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}At.exports=he;he.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)};he.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null};he.prototype.retry=function(e){if(this._timeout&&clearTimeout(this._timeout),!e)return!1;var s=new Date().getTime();if(e&&s-this._operationStart>=this._maxRetryTime)return this._errors.push(e),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(e);var o=this._timeouts.shift();if(o===void 0)if(this._cachedTimeouts)this._errors.splice(0,this._errors.length-1),o=this._cachedTimeouts.slice(-1);else return!1;var r=this;return this._timer=setTimeout(function(){r._attempts++,r._operationTimeoutCb&&(r._timeout=setTimeout(function(){r._operationTimeoutCb(r._attempts)},r._operationTimeout),r._options.unref&&r._timeout.unref()),r._fn(r._attempts)},o),this._options.unref&&this._timer.unref(),!0};he.prototype.attempt=function(e,s){this._fn=e,s&&(s.timeout&&(this._operationTimeout=s.timeout),s.cb&&(this._operationTimeoutCb=s.cb));var o=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){o._operationTimeoutCb()},o._operationTimeout)),this._operationStart=new Date().getTime(),this._fn(this._attempts)};he.prototype.try=function(e){console.log("Using RetryOperation.try() is deprecated"),this.attempt(e)};he.prototype.start=function(e){console.log("Using RetryOperation.start() is deprecated"),this.attempt(e)};he.prototype.start=he.prototype.try;he.prototype.errors=function(){return this._errors};he.prototype.attempts=function(){return this._attempts};he.prototype.mainError=function(){if(this._errors.length===0)return null;for(var e={},s=null,o=0,r=0;r<this._errors.length;r++){var i=this._errors[r],n=i.message,u=(e[n]||0)+1;e[n]=u,u>=o&&(s=i,o=u)}return s}});var xt=_e(be=>{var Ar=Et();be.operation=function(e){var s=be.timeouts(e);return new Ar(s,{forever:e&&(e.forever||e.retries===1/0),unref:e&&e.unref,maxRetryTime:e&&e.maxRetryTime})};be.timeouts=function(e){if(e instanceof Array)return[].concat(e);var s={retries:10,factor:2,minTimeout:1*1e3,maxTimeout:1/0,randomize:!1};for(var o in e)s[o]=e[o];if(s.minTimeout>s.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var r=[],i=0;i<s.retries;i++)r.push(this.createTimeout(i,s));return e&&e.forever&&!r.length&&r.push(this.createTimeout(i,s)),r.sort(function(n,u){return n-u}),r};be.createTimeout=function(e,s){var o=s.randomize?Math.random()+1:1,r=Math.round(o*Math.max(s.minTimeout,1)*Math.pow(s.factor,e));return r=Math.min(r,s.maxTimeout),r};be.wrap=function(e,s,o){if(s instanceof Array&&(o=s,s=null),!o){o=[];for(var r in e)typeof e[r]=="function"&&o.push(r)}for(var i=0;i<o.length;i++){var n=o[i],u=e[n];e[n]=function(_){var b=be.operation(s),y=Array.prototype.slice.call(arguments,1),l=y.pop();y.push(function(v){b.retry(v)||(v&&(arguments[0]=b.mainError()),l.apply(this,arguments))}),b.attempt(function(){_.apply(e,y)})}.bind(e,u),e[n].options=s}}});var Tt=_e((mn,St)=>{St.exports=xt()});var It=_e((gn,Ne)=>{"use strict";var Er=Tt(),xr=["Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed"],Le=class extends Error{constructor(s){super(),s instanceof Error?(this.originalError=s,{message:s}=s):(this.originalError=new Error(s),this.originalError.stack=this.stack),this.name="AbortError",this.message=s}},Sr=(e,s,o)=>{let r=o.retries-(s-1);return e.attemptNumber=s,e.retriesLeft=r,e},Tr=e=>xr.includes(e),Ct=(e,s)=>new Promise((o,r)=>{s={onFailedAttempt:()=>{},retries:10,...s};let i=Er.operation(s);i.attempt(async n=>{try{o(await e(n))}catch(u){if(!(u instanceof Error)){r(new TypeError(`Non-error was thrown: "${u}". You should only throw errors.`));return}if(u instanceof Le)i.stop(),r(u.originalError);else if(u instanceof TypeError&&!Tr(u.message))i.stop(),r(u);else{Sr(u,n,s);try{await s.onFailedAttempt(u)}catch(d){r(d);return}i.retry(u)||r(i.mainError())}}})});Ne.exports=Ct;Ne.exports.default=Ct;Ne.exports.AbortError=Le});(function(e,s){if(typeof e.createEvent!="function")return!1;var o=function(p){var S=p.toLowerCase(),a="MS"+p;return navigator.msPointerEnabled?a:window.PointerEvent?S:!1},r=function(p){return"on"+p in window?p:!1},i={useJquery:!s.IGNORE_JQUERY&&typeof jQuery!="undefined",swipeThreshold:s.SWIPE_THRESHOLD||100,tapThreshold:s.TAP_THRESHOLD||150,dbltapThreshold:s.DBL_TAP_THRESHOLD||200,longtapThreshold:s.LONG_TAP_THRESHOLD||1e3,tapPrecision:s.TAP_PRECISION/2||60/2,justTouchEvents:s.JUST_ON_TOUCH_DEVICES},n=!1,u={touchstart:r("touchstart")||o("PointerDown"),touchend:r("touchend")||o("PointerUp"),touchmove:r("touchmove")||o("PointerMove")},d=function(p){return!p.pointerId||typeof k=="undefined"||p.pointerId===k},_=function(p,S,a){for(var O=S.split(" "),G=O.length;G--;)p.addEventListener(O[G],a,!1)},b=function(p){var S=Boolean(p.targetTouches&&p.targetTouches.length);switch(!0){case Boolean(p.target.touches):return p.target.touches[0];case(S&&typeof p.targetTouches[0].pageX!="undefined"):return p.targetTouches[0];case(S&&Boolean(p.targetTouches[0].touches)):return p.targetTouches[0].touches[0];default:return p}},y=function(p){return(p.targetTouches||p.target.touches||[]).length>1},l=function(){return new Date().getTime()},v=function(p,S,a,O){var G=e.createEvent("Event");if(G.originalEvent=a,O=O||{},O.x=D,O.y=E,i.useJquery&&(G=jQuery.Event(S,{originalEvent:a}),jQuery(p).trigger(G,O)),G.initEvent){for(var N in O)G[N]=O[N];G.initEvent(S,!0,!0),p.dispatchEvent(G)}for(;p;)p["on"+S]&&p["on"+S](G),p=p.parentNode},w=function(p){if(!(!d(p)||y(p))&&(k=p.pointerId,p.type!=="mousedown"&&(n=!0),!(p.type==="mousedown"&&n))){var S=b(p);L=D=S.pageX,R=E=S.pageY,K=setTimeout(function(){v(p.target,"longtap",p),z=p.target},i.longtapThreshold),W=l(),m++}},c=function(p){if(!(!d(p)||y(p))){if(k=void 0,p.type==="mouseup"&&n){n=!1;return}var S=[],a=l(),O=R-E,G=L-D;if(clearTimeout(M),clearTimeout(K),G<=-i.swipeThreshold&&S.push("swiperight"),G>=i.swipeThreshold&&S.push("swipeleft"),O<=-i.swipeThreshold&&S.push("swipedown"),O>=i.swipeThreshold&&S.push("swipeup"),S.length){for(var N=0;N<S.length;N++){var J=S[N];v(p.target,J,p,{distance:{x:Math.abs(G),y:Math.abs(O)}})}m=0}else L>=D-i.tapPrecision&&L<=D+i.tapPrecision&&R>=E-i.tapPrecision&&R<=E+i.tapPrecision&&W+i.tapThreshold-a>=0&&(v(p.target,m>=2&&z===p.target?"dbltap":"tap",p),z=p.target),M=setTimeout(function(){m=0},i.dbltapThreshold)}},h=function(p){if(!!d(p)&&!(p.type==="mousemove"&&n)){var S=b(p);D=S.pageX,E=S.pageY}},m=0,k,D,E,L,R,W,z,M,K;_(e,u.touchstart+(i.justTouchEvents?"":" mousedown"),w),_(e,u.touchend+(i.justTouchEvents?"":" mouseup"),c),_(e,u.touchmove+(i.justTouchEvents?"":" mousemove"),h),s.tocca=function(p){for(var S in p)i[S]=p[S];return i}})(document,window);var ot=we(ft()),ir=we(mt()),sr=we(gt());var Be=null,Ye=null;"PointerEvent"in window||(wr(),"TouchEvent"in window||(Ge(document,"mousedown","pointerdown"),Ge(document,"mousemove","pointermove"),Ge(document,"mouseup","pointerup")),Ke(document,"touchstart","pointerdown"),Ke(document,"touchmove","pointermove"),Ke(document,"touchend","pointerup"));function wr(){Element.prototype.setPointerCapture=Element.prototype.setCapture,Element.prototype.releasePointerCapture=Element.prototype.releaseCapture}function Ge(e,s,o){e.addEventListener(s,r=>{let i=new MouseEvent(o,r);i.pointerId=1,i.isPrimary=!0,i.pointerType="mouse",i.width=1,i.height=1,i.tiltX=0,i.tiltY=0,"buttons"in r&&r.buttons!==0?i.pressure=.5:i.pressure=0;let n=r.target;Ye!==null&&(n=Ye,s==="mouseup"&&(Ye=null)),n.dispatchEvent(i),i.defaultPrevented&&r.preventDefault()})}function Ke(e,s,o){e.addEventListener(s,r=>{let i=r.changedTouches,n=i.length;for(let u=0;u<n;u++){let d=new CustomEvent(o,{bubbles:!0,cancelable:!0});d.ctrlKey=r.ctrlKey,d.shiftKey=r.shiftKey,d.altKey=r.altKey,d.metaKey=r.metaKey;let _=i.item(u);d.clientX=_.clientX,d.clientY=_.clientY,d.screenX=_.screenX,d.screenY=_.screenY,d.pageX=_.pageX,d.pageY=_.pageY;let b=_.target.getBoundingClientRect();d.offsetX=_.clientX-b.left,d.offsetY=_.clientY-b.top,d.pointerId=1+_.identifier,d.button=0,d.buttons=1,d.movementX=0,d.movementY=0,d.region=null,d.relatedTarget=null,d.x=d.clientX,d.y=d.clientY,d.pointerType="touch",d.width=1,d.height=1,d.tiltX=0,d.tiltY=0,d.pressure=1,s==="touchstart"&&Be===null&&(Be=_.identifier),d.isPrimary=_.identifier===Be,s==="touchend"&&d.isPrimary&&(Be=null),r.target.dispatchEvent(d),d.defaultPrevented&&r.preventDefault()}})}var Wt=we(vt());var zt=we(kt()),Ot=we(It()),Dt="Waiting for database",Cr=self.indexedDB||self.webkitIndexedDB||self.mozIndexedDB||self.msIndexedDB,ke={main:"main",tracks:"tracks"},Ce,Ie;Ie=Cr.open("diffuse",1);Ie.onupgradeneeded=e=>{e.target.result.createObjectStore(ke.main),e.target.result.createObjectStore(ke.tracks)};Ie.onsuccess=e=>{Ce=Ie.result};Ie.onerror=e=>{console.error("IndexedDB error: "+e.target.error)};var ze=e=>Pt(()=>new Promise((s,o)=>{if(!Ce)throw new Error(Dt);let r=e.store||ke.main,i=e.key,u=Ce.transaction([r],"readonly").objectStore(r).get(i);u.onsuccess=d=>{u.result?s(u.result):s(null)},u.onerror=o})),Rt=e=>Pt(()=>new Promise((s,o)=>{if(!Ce)throw new Error(Dt);let r=(e||{}).store||ke.main,n=Ce.transaction([r],"readonly").objectStore(r).getAllKeys();n.onsuccess=u=>{n.result?s(n.result):s(null)},n.onerror=o}));function Pt(e){return(0,Ot.default)(e,{onFailedAttempt:s=>(0,zt.default)(250),retries:20})}var Lt=location.host==="localhost:8000",Nt={api:"https://runfission.net",lobby:"https://auth.runfission.net",user:"fissionuser.net"},Je=(e,s=250,o)=>(...r)=>clearTimeout(o,o=setTimeout(e,s,...r)),Ft=(e,s=250,o,r)=>(...i)=>{r=i,!o&&(o=!0,setTimeout(()=>{e(...r),o=!1},s))};function Ut(e){switch(e.toLowerCase().split("/")[1]){case"mp3":return"mp3";case"mpeg":return"mp3";case"mp4a-latm":return"m4a";case"mp4":return"m4a";case"x-m4a":return"m4a";case"flac":return"flac";case"ogg":return"ogg";case"wav":return"wav";case"wave":return"wav";case"webm":return"webm"}}function $e(e){let s=e.split("://");switch(s[0]){case"dropbox":{let o=s[1].split("@"),r=o[0],i=o[1];return fetch("https://api.dropboxapi.com/2/files/get_temporary_link",{method:"POST",body:JSON.stringify({path:i}),headers:new Headers({Authorization:"Bearer "+r,"Content-Type":"application/json"})}).then(n=>n.json()).then(n=>n.link)}default:return Promise.resolve(e)}}var Zt=!!navigator.platform.match(/iPhone|iPod|iPad/)||navigator.vendor==="Apple Computer, Inc.",rt=Zt;function nt(){return rt}var ye=(()=>{let e,s=["height: 0","width: 0","visibility: hidden","pointer-events: none"];return e=document.createElement("div"),e.setAttribute("class","absolute left-0 top-0"),e.setAttribute("style",s.join("; ")),e})();function Ir(){document.body.appendChild(ye)}var Ht="data:audio/mp3;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU2LjM2LjEwMAAAAAAAAAAAAAAA//OEAAAAAAAAAAAAAAAAAAAAAAAASW5mbwAAAA8AAAAEAAABIADAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDV1dXV1dXV1dXV1dXV1dXV1dXV1dXV1dXV6urq6urq6urq6urq6urq6urq6urq6urq6v////////////////////////////////8AAAAATGF2YzU2LjQxAAAAAAAAAAAAAAAAJAAAAAAAAAAAASDs90hvAAAAAAAAAAAAAAAAAAAA//MUZAAAAAGkAAAAAAAAA0gAAAAATEFN//MUZAMAAAGkAAAAAAAAA0gAAAAARTMu//MUZAYAAAGkAAAAAAAAA0gAAAAAOTku//MUZAkAAAGkAAAAAAAAA0gAAAAANVVV";function Xt(e){Ir(),Zt&&it(e,{url:Ht,trackId:""}).then(s=>{let o=()=>{e.audio&&e.audio.play(),document.body.removeEventListener("click",o)};document.body.addEventListener("click",o)})}var Yt=.5;function Gt(e,s,o){switch(s){case"VOLUME":Yt=o,e.audio&&(e.audio.volume=o);break}}function it(e,s,o){s.url==null&&console.error("insertTrack, missing `url`"),s.trackId==null&&console.error("insertTrack, missing `trackId`"),e.app.ports.setAudioHasStalled.send(!1),e.app.ports.setAudioPosition.send(0),clearTimeout(e.unstallTimeout),Oe=1,at(s,o);let r=s.isCached?ze({key:s.trackId,store:ke.tracks}).then(Fr):$e(s.url),i;return r.then(n=>{s=Object.assign({},s,{url:n}),i=ye.querySelector("audio"),rt&&i?(i.setAttribute("src",s.url),i.setAttribute("rel",s.trackId),i.load()):(i=Kt(s))?(i.setAttribute("data-preload","f"),i.setAttribute("data-timestamp",Date.now()),i.readyState>=4?st(i,s,e.app):(e.app.ports.setAudioIsLoading.send(!0),i.load())):i=qt(e,s,Date.now()),i.volume=Yt,e.audio=i})}function Kt(e){return ye.querySelector(`[rel="${e.trackId}"]`)}function qt(e,s,o,r){let i,n=d=>_=>{Jt(e,_.target)&&d.call(e,_)},u=s.url.includes("service_worker_authentication")?"use-credentials":"anonymous";return i=new Audio,i.setAttribute("crossorigin",u),i.setAttribute("data-preload",r?"t":"f"),i.setAttribute("data-timestamp",o),i.setAttribute("preload",rt?"none":"auto"),i.setAttribute("rel",s.trackId),i.setAttribute("src",s.url),i.crossorigin="anonymous",i.volume=1,i.addEventListener("canplay",n(Lr)),i.addEventListener("ended",n(Rr)),i.addEventListener("error",n(zr)),i.addEventListener("loadstart",n(Mt)),i.addEventListener("loadeddata",n(jt)),i.addEventListener("pause",n(Br)),i.addEventListener("play",n(Pr)),i.addEventListener("seeking",n(Mt)),i.addEventListener("seeked",n(jt)),i.addEventListener("timeupdate",n(Dr)),i.load(),ye.appendChild(i),i}function Vt(e,s){Kt(s)||(ye.querySelectorAll('[data-preload="t"]').forEach(o=>o.parentNode.removeChild(o)),$e(s.url).then(o=>{let r=Object.assign({},s,{url:o});qt(e,r,Date.now()+1e3*60*60*2,!0)}))}function Qt(e,s){e&&!isNaN(e.duration)&&(e.paused&&e.play(),e.currentTime=e.duration*s)}var Fe=!1,Oe=1;function zr(e){switch(this.app.ports.setAudioIsPlaying.send(!1),e.target.error.code){case e.target.error.MEDIA_ERR_ABORTED:console.error("You aborted the audio playback.");break;case e.target.error.MEDIA_ERR_NETWORK:console.error("A network error caused the audio download to fail."),et.call(this),tt.call(this,e);break;case e.target.error.MEDIA_ERR_DECODE:console.error("The audio playback was aborted due to a corruption problem or because the video used features your browser did not support.");break;case e.target.error.MEDIA_ERR_SRC_NOT_SUPPORTED:console.error("The audio not be loaded, either because the server or network failed or because the format is not supported."),e.target.currentTime&&e.target.currentTime>0?(et.call(this),tt.call(this,e)):navigator.onLine?(Or.call(this),clearTimeout(this.loadingTimeoutId),this.app.ports.setAudioIsLoading.send(!1)):(et.call(this),tt.call(this,e));break;default:console.error("An unknown error occurred.")}}function et(){Fe||(Fe=!0,this.app.ports.showErrorNotification.send(navigator.onLine?"I can't play this track because of a network error. I'll try to reconnect.":"I can't play this track because we're offline. I'll try to reconnect."))}function Or(){this.app.ports.showErrorNotification.send("__I can't play this track because your browser didn't recognize it.__ Try checking your developer console for a warning to find out why.")}function tt(e,s){this.app.ports.setAudioIsLoading.send(!0),clearTimeout(this.unstallTimeout),(Oe>=3||s)&&this.app.ports.setAudioHasStalled.send(!0),setTimeout(o=>{Jt(this,e.target)&&Mr.call(this,e.target)},Oe*2500),Oe++}function Dr(e){let s=e.target;if(isNaN(s.duration)||isNaN(s.currentTime)||s.duration===0)return;$t.call(this,s),this.app.ports.setAudioPosition.send(s.currentTime),navigator.mediaSession&&navigator.mediaSession.setPositionState&&navigator.mediaSession.setPositionState({duration:s.duration,position:s.currentTime});let o=s.currentTime/s.duration;s.duration>=30*60&&Ur(this,o)}function Rr(e){this.repeat?(e.target.startedPlayingAt=Math.floor(Date.now()/1e3),this.scrobbleTimer&&this.scrobbleTimer.stop(),st(e.target,this.activeQueueItem,this.app)):(this.app.ports.noteProgress.send({trackId:this.activeQueueItem.trackId,progress:1}),this.app.ports.activeQueueItemEnded.send(null))}function Mt(e){clearTimeout(this.loadingTimeoutId),this.loadingTimeoutId=setTimeout(()=>{if(this.audio)this.audio.readyState===4&&this.audio.currentTime===0?this.app.ports.setAudioIsLoading.send(!1):this.app.ports.setAudioIsLoading.send(!0);else return},1750)}function jt(e){clearTimeout(this.loadingTimeoutId),this.app.ports.setAudioHasStalled.send(!1),this.app.ports.setAudioIsLoading.send(!1),e.target.paused&&st(e.target,this.activeQueueItem,this.app)}function Pr(e){this.app.ports.setAudioIsPlaying.send(!0),navigator.mediaSession&&(navigator.mediaSession.playbackState="playing"),this.scrobbleTimer&&this.scrobbleTimer.start()}function Br(e){this.app.ports.setAudioIsPlaying.send(!1),navigator.mediaSession&&(navigator.mediaSession.playbackState="paused"),this.scrobbleTimer&&this.scrobbleTimer.pause()}function Lr(e){Fe=!1,$t.call(this,e.target)}function Nr(e){return e?e.getAttribute("rel"):void 0}function Fr(e){return URL.createObjectURL(e)}function Jt(e,s){return!e.activeQueueItem||!s||s.getAttribute("data-preload")==="t"?!1:e.activeQueueItem.trackId===Nr(s)}function st(e,s,o){s.progress&&e.duration&&(e.currentTime=s.progress*e.duration),(e.play()||Promise.resolve()).catch(i=>{let n="Couldn't play audio automatically. Please resume playback manually.";console.error(n,i),o&&o.ports.fromAlien.send({tag:"",data:null,error:n})})}var Ur=Ft((e,s)=>{e.app.ports.noteProgress.send({trackId:e.activeQueueItem.trackId,progress:s})},3e4),Ae=0;function $t(e){if(e.duration===Ae||(this.app.ports.setAudioDuration.send(e.duration||0),Ae=e.duration,!Ae||Ae<30))return;let s=Math.floor(Date.now()/1e3),o=Math.min(240+.5,Ae/1.95),r=e.getAttribute("rel");e.startedPlayingAt=s,this.scrobbleTimer=new Wt.default({onend:i=>this.app.ports.scrobble.send({duration:Math.round(Ae),timestamp:e.startedPlayingAt||s,trackId:r})}),this.scrobbleTimer.start(o)}function at(e,s){if(!("mediaSession"in navigator)||!e.trackTags)return;let o=[];s&&typeof s!="string"&&(o=[{src:URL.createObjectURL(s),type:s.type}]),navigator.mediaSession.metadata=new MediaMetadata({title:e.trackTags.title,artist:e.trackTags.artist,album:e.trackTags.album,artwork:o})}function Mr(e){let s=e.currentTime;e.load(),e.currentTime=s,Oe>5&&!Fe&&navigator.onLine&&this.app.ports.showStickyErrorNotification.send("You loaded too many tracks too quickly, which the browser can't handle. You'll most likely have to reload the browser.")}function er(e){ye.querySelectorAll("audio[data-timestamp]").forEach(o=>{parseInt(o.getAttribute("data-timestamp"),10)>=e||(o.src=Ht,ye.removeChild(o))})}var tr="3.1.1";location.hostname.endsWith("diffuse.sh")&&location.protocol==="http:"?(location.href=location.href.replace("http://","https://"),Ue("Just a moment, redirecting to HTTPS.")):self.isSecureContext?"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("service-worker.js").catch(e=>{let s=navigator.userAgent.toLowerCase().includes("firefox");return console.error(e),Ue(location.protocol==="https:"||location.hostname==="localhost"?"Failed to start the service worker."+(s?" Make sure the setting <strong>Delete cookies and site data when Firefox is closed</strong> is off, or Diffuse's domain is added as an exception.":""):"Failed to start the service worker, try using HTTPS.")}).then(Zr).catch(e=>(console.error(e),Ue("<strong>Failed to start the application.</strong><br />See browser console for details.")))}):Ue(`
    This app only works on a <a class="underline" target="_blank" href="https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts#When_is_a_context_considered_secure">secure context</a>, HTTPS & localhost, and modern browsers.
  `);var $,ce={};function Zr(e){$=Elm.UI.init({node:document.getElementById("elm"),flags:{buildTimestamp:1659887096,darkMode:an().matches,initialTime:Date.now(),isInstallingServiceWorker:!!e.installing,isOnline:navigator.onLine,upgrade:ln(),version:tr,viewport:{height:window.innerHeight,width:window.innerWidth}}}),self.app=$,ce.brain(),ce.audio(),ce.backdrop(),ce.broadcastChannel(),ce.clipboard(),ce.covers(),ce.serviceWorker(e),ce.webnative(),$.ports.openUrlOnNewPage.subscribe(s=>{window.open(s,"_blank")}),$.ports.reloadApp.subscribe(s=>{let o=setTimeout(()=>{e.waiting&&e.waiting.postMessage("skipWaiting"),location.reload()},250);De.addEventListener("message",r=>{r.data==="PONG"&&(clearTimeout(o),alert("\u26A0\uFE0F You can only update the app when you have no more than one instance open."))}),De.postMessage("PING")})}function Ue(e){let s=document.createElement("div");s.className="flex flex-col font-body items-center h-screen italic justify-center leading-relaxed px-4 text-center text-base text-white",s.innerHTML=`
    <a class="block logo mb-5" href="../">
      <img src="../images/diffuse-light.svg" />
    </a>

    <p class="max-w-sm opacity-60">
      ${e}
    </p>
  `,document.body.appendChild(s);let o=document.querySelector("#elm");o&&o.parentNode.removeChild(o)}var je;ce.brain=()=>{je=new Worker("brain.js#appHref="+encodeURIComponent(window.location.href)),je.onmessage=e=>{if(e.data.action)return Hr(e.data.action,e.data.data,e.ports);switch(e.data.tag&&$.ports.fromAlien.send(e.data),e.data.tag){case"GOT_CACHED_COVER":return rn(e.data.data)}},$.ports.toBrain.subscribe(e=>je.postMessage(e))};function Hr(e,s,o){switch(e){case"DOWNLOAD_TRACKS":return on(s);case"FINISHED_DOWNLOADING_ARTWORK":return sn()}}var ee;ce.audio=()=>{ee={activeQueueItem:null,audio:null,app:$,repeat:!1},Xt(ee),$.ports.activeQueueItemChanged.subscribe(Xr),$.ports.adjustEqualizerSetting.subscribe(Yr),$.ports.pause.subscribe(Gr),$.ports.play.subscribe(Kr),$.ports.preloadAudio.subscribe(qr()),$.ports.seek.subscribe(Vr),$.ports.setRepeat.subscribe(Qr)};function Xr(e){if(ee.activeQueueItem&&ee.audio&&e&&e.trackId===ee.activeQueueItem.trackId){ee.audio.currentTime=0;return}let s=Date.now();if(ee.activeQueueItem=e,ee.audio=null,ee.coverPrep=null,ee.scrobbleTimer&&(ee.scrobbleTimer.stop(),ee.scrobbleTimer=null),nt()||er(s),e){let o={cacheKey:btoa(unescape(encodeURIComponent(e.trackTags.artist+" --- "+e.trackTags.album))),trackFilename:e.trackPath.split("/").reverse()[0],trackPath:e.trackPath,trackSourceId:e.sourceId,variousArtists:"f"};ut(o.cacheKey).then(r=>{r=r==="TRIED"?null:r,ee.coverPrep=o,it(ee,e,r).then(()=>{if(r)ee.audio.waitingForArtwork=null;else{if(!ee.audio)return;ee.audio.waitingForArtwork=o.cacheKey,or([o])}})})}else $.ports.setAudioIsPlaying.send(!1),$.ports.setAudioPosition.send(0),navigator.mediaSession&&(navigator.mediaSession.playbackState="none")}function Yr(e){Gt(ee,e.knob,e.value)}function Gr(e){ee.audio&&ee.audio.pause()}function Kr(e){ee.audio&&ee.audio.play()}function qr(){return Je(e=>{nt()||e.isCached||Vt(ee,e)},15e3)}function Vr(e){Qt(ee.audio,e)}function Qr(e){ee.repeat=e}var Me;ce.webnative=()=>{$.ports.webnativeRequest.subscribe(e=>{Jr().then(()=>{self.webnativeElm.request({app:$,request:e})})})};function Jr(){return Me?Promise.resolve():(0,ot.default)("vendor/webnative.min.js").then(()=>(0,ot.default)("vendor/webnative-elm.min.js")).then(()=>{Me=window.webnative,["localhost","nightly.diffuse.sh"].includes(location.hostname)&&Me.setup.debug({enabled:!0}),Lt&&Me.setup.endpoints(Nt)})}ce.backdrop=()=>{$.ports.pickAverageBackgroundColor.subscribe(en)};function $r(e){let s=document.createElement("canvas"),o=s.getContext("2d");s.width=e.naturalWidth,s.height=e.naturalHeight,o.drawImage(e,0,0);let r=o.getImageData(0,0,s.width,s.height),i={r:0,g:0,b:0};for(let n=0,u=r.data.length;n<u;n+=4)i.r+=r.data[n],i.g+=r.data[n+1],i.b+=r.data[n+2];return i.r=Math.floor(i.r/(r.data.length/4)),i.g=Math.floor(i.g/(r.data.length/4)),i.b=Math.floor(i.b/(r.data.length/4)),i}function en(e){let s=document.querySelector(`img[src$="${e}"]`);if(s){let o=$r(s);$.ports.setAverageBackgroundColor.send(o)}}var De;ce.broadcastChannel=()=>{De=new BroadcastChannel(`Diffuse-${location.hostname}`),De.addEventListener("message",e=>{switch(e.data){case"PING":return De.postMessage("PONG")}})};ce.clipboard=()=>{$.ports.copyToClipboard.subscribe(tn)};function tn(e){let s=document.createElement("textarea");s.value=e,s.setAttribute("readonly",""),s.style.position="absolute",s.style.left="-9999px",document.body.appendChild(s);let o=document.getSelection().rangeCount>0?document.getSelection().getRangeAt(0):!1;s.select(),document.execCommand("copy"),document.body.removeChild(s),o&&(document.getSelection().removeAllRanges(),document.getSelection().addRange(o))}ce.covers=()=>{$.ports.loadAlbumCovers.subscribe(Je(ar,500)),Rt().then(nn)};function ut(e){return ze({key:`coverCache.${e}`})}function rn({key:e,url:s}){let o=ee.activeQueueItem;if(o&&ee.coverPrep&&e===ee.coverPrep.key&&s){let r=[{src:s}];typeof s!="string"&&(r=[{src:URL.createObjectURL(s),type:s.type}]),navigator.mediaSession.metadata=new MediaMetadata({title:o.trackTags.title,artist:o.trackTags.artist,album:o.trackTags.album,artwork:r})}}function ar({coverView:e,list:s}={}){let o=[];if(s&&(o=o.concat(Array.from(document.querySelectorAll("#diffuse__track-covers [data-key]")))),e&&(o=o.concat(Array.from(document.querySelectorAll("#diffuse__track-covers + div [data-key]")))),!o.length)return;let r=o.map(i=>({cacheKey:i.getAttribute("data-key"),trackFilename:i.getAttribute("data-filename"),trackPath:i.getAttribute("data-path"),trackSourceId:i.getAttribute("data-source-id"),variousArtists:i.getAttribute("data-various-artists")}));return or(r)}function or(e){return e.reduce((s,o)=>s.then(r=>ut(o.cacheKey).then(i=>i?r:r.concat([o]))),Promise.resolve([])).then(s=>{je.postMessage({action:"DOWNLOAD_ARTWORK",data:s})})}function nn(e){e.filter(r=>r.startsWith("coverCache.")).reduce((r,i)=>r.then(n=>ze({key:i}).then(u=>{let d=i.slice(11);return u&&typeof u!="string"&&(n[d]=URL.createObjectURL(u)),n})),Promise.resolve({})).then(r=>{$.ports.insertCoverCache.send(r),setTimeout(()=>ar({list:!0,coverView:!0}),500)})}function sn(){!ee.audio||!ee.audio.waitingForArtwork||!ee.activeQueueItem||(ut(ee.audio.waitingForArtwork).then(e=>{at(ee.activeQueueItem,e)}),ee.audio.waitingForArtwork=null)}function an(){let e=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)");return e&&e.addEventListener&&e.addEventListener("change",s=>{$.ports.preferredColorSchemaChanged.send({dark:s.matches})}),e}function on(e){let s=new ir.default,o=s.folder("Diffuse - "+e.name);return e.tracks.reduce((r,i)=>r.then(n=>fetch(i.url)).then(n=>{let u=n.headers.get("content-type"),d=Ut(u)||"unknown";return n.blob().then(_=>o.file(i.filename+"."+d,_))}),Promise.resolve()).then(r=>s.generateAsync({type:"blob"})).then(r=>{(0,sr.saveAs)(r,"Diffuse - "+e.name+".zip"),$.ports.downloadTracksFinished.send(null)})}document.body.addEventListener("click",e=>{(e.target.matches("button, a")||e.target.closest("button, a"))&&un()});function un(){let e=document.activeElement;e&&!e.dataset.keepFocus&&e.blur()}window.addEventListener("blur",e=>{$&&e.target===window&&$.ports.lostWindowFocus.send(null)});var ur="input, textarea";document.addEventListener("keyup",e=>{let s=e.target.closest(ur);s&&s.setAttribute("changed","")});document.addEventListener("click",e=>{if(e.target.tagName!=="BUTTON")return;let s=e.target.closest("form");s&&lr(s)});document.addEventListener("submit",e=>{let s=e.target.closest("form");s&&lr(s)});function lr(e){[].slice.call(e.querySelectorAll(ur)).forEach(s=>{s.setAttribute("changed","")})}window.addEventListener("online",cr);window.addEventListener("offline",cr);function cr(){$.ports.setIsOnline.send(navigator.onLine)}document.addEventListener("MediaPlayPause",()=>{$.ports.requestPlayPause.send(null)});document.addEventListener("MediaStop",()=>{$.ports.requestStop.send(null)});document.addEventListener("MediaPrev",()=>{$.ports.requestPrevious.send(null)});document.addEventListener("MediaNext",()=>{$.ports.requestNext.send(null)});"mediaSession"in navigator&&(navigator.mediaSession.setActionHandler("play",()=>{$.ports.requestPlay.send(null)}),navigator.mediaSession.setActionHandler("pause",()=>{$.ports.requestPause.send(null)}),navigator.mediaSession.setActionHandler("previoustrack",()=>{$.ports.requestPrevious.send(null)}),navigator.mediaSession.setActionHandler("nexttrack",()=>{$.ports.requestNext.send(null)}),navigator.mediaSession.setActionHandler("seekbackward",e=>{let s=ee.audio,o=e.seekOffset||10;s&&(s.currentTime=Math.max(s.currentTime-o,0))}),navigator.mediaSession.setActionHandler("seekforward",e=>{let s=ee.audio,o=e.seekOffset||10;s&&(s.currentTime=Math.min(s.currentTime+o,s.duration))}),navigator.mediaSession.setActionHandler("seekto",e=>{let s=ee.audio;s&&(s.currentTime=e.seekTime)}));var ve;tocca({dbltapThreshold:400,tapThreshold:250});function rr(e,s){let o=new MouseEvent(e,s);return o.pointerId=1,o.isPrimary=!0,o.pointerType="mouse",o.width=1,o.height=1,o.tiltX=0,o.tiltY=0,"buttons"in s&&s.buttons!==0?o.pressure=.5:o.pressure=0,o}function nr(e,s,o){let r=new CustomEvent(e,{bubbles:!0,cancelable:!0});r.ctrlKey=s.ctrlKey,r.shiftKey=s.shiftKey,r.altKey=s.altKey,r.metaKey=s.metaKey,r.clientX=o.clientX,r.clientY=o.clientY,r.screenX=o.screenX,r.screenY=o.screenY,r.pageX=o.pageX,r.pageY=o.pageY;let i=o.target.getBoundingClientRect();return r.offsetX=o.clientX-i.left,r.offsetY=o.clientY-i.top,r.pointerId=1+o.identifier,r.button=0,r.buttons=1,r.movementX=0,r.movementY=0,r.region=null,r.relatedTarget=null,r.x=r.clientX,r.y=r.clientY,r.pointerType="touch",r.width=1,r.height=1,r.tiltX=0,r.tiltY=0,r.pressure=1,r.isPrimary=!0,r}self.PointerEvent||document.addEventListener("mouseover",e=>{let s=document.body.querySelector("section"),r=s&&s.classList.contains("dragging-something")&&document.elementFromPoint(e.clientX,e.clientY);r&&r!=ve&&(ve&&ve.dispatchEvent(rr("pointerleave",e)),r.dispatchEvent(rr("pointerenter",e)),ve=r)});document.body.addEventListener("touchmove",e=>{let s=document.body.querySelector("section"),o=s&&s.classList.contains("dragging-something"),r=e.touches[0],i;o&&r&&(i=document.elementFromPoint(r.clientX,r.clientY)),i&&i!=ve&&(ve&&ve.dispatchEvent(nr("pointerleave",e,r)),i.dispatchEvent(nr("pointerenter",e,r)),ve=i),o&&e.stopPropagation()});ce.serviceWorker=async e=>{e.installing&&console.log("\u{1F9D1}\u200D\u2708\uFE0F Service worker is installing");let s=e.installing;e.addEventListener("updatefound",()=>{let o=e.installing;o!==s&&(console.log("\u{1F9D1}\u200D\u2708\uFE0F A new version of Diffuse is available"),$.ports.installingNewServiceWorker.send(null)),o.addEventListener("statechange",r=>{console.log("\u{1F9D1}\u200D\u2708\uFE0F Service worker is",r.target.state),r.target.state==="installed"&&$.ports.installedNewServiceWorker.send(null)})}),e.update(),setInterval(()=>e.update(),1*1e3*60*60)};window.addEventListener("touchstart",function e(){!$||($.ports.indicateTouchDevice.send(null),window.removeEventListener("touchstart",e,!1))},!1);function ln(){let e=!!localStorage.getItem("additional-userdata");return e&&localStorage.removeItem("additional-userdata"),e}dr();window.addEventListener("resize",()=>{setTimeout(dr,0)});function dr(){let e=document.documentElement.clientHeight*.01;document.documentElement.style.setProperty("--vh",`${e}px`)}})();
/*!

JSZip v3.7.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/master/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/master/LICENSE
*/
/*! load-script2. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
