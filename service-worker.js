(()=>{var o=`diffuse-${1659887096}`,l=["_headers","_redirects","CORS"];self.addEventListener("activate",t=>{caches.keys().then(s=>{s.forEach(e=>{e!==o&&caches.delete(e)})})});self.addEventListener("install",t=>{let s=self.location.href.replace("service-worker.js",""),e=fetch("tree.json").then(r=>r.json()).then(r=>{let a=r.filter(n=>!l.find(i=>i===n)),c=[s,`${s.replace(/\/+$/,"")}/about/`].concat(a);return caches.open(o).then(n=>Promise.all(c.map(i=>n.add(i))))});t.waitUntil(e)});self.addEventListener("fetch",t=>{let s=!!t.request.url.match(new RegExp("^"+self.location.origin));if(t.request.url.includes("service_worker_authentication=")){let e=new URL(t.request.url),r=e.searchParams.get("service_worker_authentication");e.searchParams.delete("service_worker_authentication"),e.search="?"+e.searchParams.toString(),h(t,e.toString(),"Basic "+r)}else if(t.request.url.includes("access_token=")){let e=new URL(t.request.url),r=e.searchParams.get("access_token");e.searchParams.delete("access_token"),e.search="?"+e.searchParams.toString(),h(t,e.toString(),"Bearer "+r)}else s&&t.respondWith(u(t))});function u(t){let s=new URL(t.request.url);return s.search="",caches.open(o).then(e=>e.match(s)).then(e=>e||fetch(s))}addEventListener("message",t=>{t.data==="skipWaiting"&&skipWaiting()});function h(t,s,e,r){let a=new Headers(t.request.headers);a.set("authorization",e);let c=new Request(new Request(s,t.request),{headers:a,mode:r||"cors",cache:"no-cache"});t.respondWith(fetch(c))}})();
